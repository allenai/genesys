{"paperId": "499ea9c53d78a65f059a926f340af5973debb030", "abstract": "Large language models (LLMs) have become the norm in natural language processing (NLP), excelling in few-shot in-context learning (ICL) with their remarkable abilities. Nonetheless, the success of ICL largely hinges on the choice of few-shot demonstration examples, making the selection process increasingly crucial. Existing methods have delved into optimizing the quantity and semantic similarity of these examples to improve ICL performances. However, our preliminary experiments indicate that the effectiveness of ICL is limited by the length of the input context. Moreover, varying combinations of few-shot demonstration examples can significantly boost accuracy across different test samples. To address this, we propose a novel method named parallel in-context learning (ParaICL) that effectively utilizes all demonstration examples without exceeding the manageable input context length. ParaICL employs parallel batching to distribute demonstration examples into different batches according to the semantic similarities of the questions in the demonstrations to the test question. It then computes normalized batch semantic scores for each batch. A weighted average semantic objective, constrained by adaptive plausibility, is applied to select the most appropriate tokens. Through extensive experiments, we validate the effectiveness of ParaICL and conduct ablation studies to underscore its design rationale. We further demonstrate that ParaICL can seamlessly integrate with existing methods.", "venue": "arXiv.org", "year": 2024, "citationCount": 0, "influentialCitationCount": 0, "openAccessPdf": null, "tldr": {"model": "tldr@v2.0.0", "text": "ParaICL employs parallel batching to distribute demonstration examples into different batches according to the semantic similarities of the questions in the demonstrations to the test question, and computes normalized batch semantic scores for each batch."}, "embedding": {"model": "specter_v2", "vector": [-0.09183193743228912, 0.15583035349845886, -0.3376939594745636, -0.3383483290672302, -0.8991166353225708, -0.4189649224281311, 0.6051433682441711, -0.014854250475764275, -0.6697660684585571, 0.08539353311061859, 0.7763453125953674, -0.09069271385669708, 0.14972752332687378, 0.5874607563018799, -0.340228796005249, 0.032345179468393326, -0.9314724206924438, 0.2508854269981384, -0.0745018720626831, -0.3902076780796051, -0.2976968586444855, -0.8647910356521606, -0.5956853628158569, 0.5436539649963379, 0.4639229476451874, -0.16334205865859985, 0.6465025544166565, 0.5895885825157166, -0.5299562215805054, -0.053872156888246536, 0.12087324261665344, -0.3641858696937561, 0.41301628947257996, -0.040958140045404434, -0.18531769514083862, -0.27207228541374207, 0.3164505064487457, -0.6936736702919006, -0.38455209136009216, 0.5827998518943787, 0.11012030392885208, 0.4620472490787506, 0.29800331592559814, -0.4336291253566742, -0.4179191589355469, 1.288352608680725, 0.758983850479126, 0.5388964414596558, 0.2779190242290497, -0.6068249344825745, 1.673913598060608, -1.9721524715423584, 0.4223744869232178, 1.6932064294815063, 0.2641589641571045, 0.695996880531311, -0.170617938041687, -0.5508090853691101, 0.9194944500923157, 0.38265255093574524, -0.7583169341087341, -0.21561677753925323, 0.09536780416965485, 0.47089263796806335, 1.6313012838363647, -0.44020313024520874, 0.23083794116973877, 0.8718289732933044, -0.2606435716152191, 1.8323677778244019, -0.40666985511779785, -1.1807334423065186, -0.21742500364780426, -0.03701261803507805, 0.12702439725399017, 0.41756024956703186, -0.6456451416015625, 0.3505372703075409, -0.7041543126106262, -0.0008741858182474971, 0.08996955305337906, 0.2507963478565216, 0.01878439635038376, 0.250218003988266, -0.4683297574520111, 0.7480258345603943, 0.23516526818275452, 1.0903960466384888, -0.06952693313360214, 0.5544878840446472, 0.44945332407951355, 0.4612613916397095, 0.04540881887078285, 0.4396675229072571, -0.24485497176647186, 0.25860822200775146, -0.8060626983642578, 0.5988150835037231, 0.23574970662593842, 0.9725983142852783, -0.4981533885002136, -0.3464151918888092, -0.932554304599762, 0.6443827152252197, 1.3722203969955444, -0.12522085011005402, 0.5078849196434021, -0.7865864634513855, 0.5876238942146301, -0.773999810218811, 0.4741525948047638, -0.00552169606089592, 0.011099733412265778, 0.3674442768096924, 0.003569601569324732, -1.1212663650512695, -0.19316722452640533, -0.03771238029003143, -0.24245399236679077, 0.8835880160331726, -0.04036632552742958, 0.4828600287437439, 0.49903878569602966, 0.2303593009710312, 0.413428395986557, 0.7090009450912476, 0.37363401055336, -0.2609318792819977, 0.46809571981430054, -0.8601474165916443, -0.4781211316585541, -0.8003534078598022, 1.2204781770706177, -0.29767459630966187, 0.7944803237915039, -0.5092986822128296, -1.058428168296814, -0.7111203670501709, -1.0182487964630127, 0.03139163926243782, -0.5811071991920471, 0.00722102727741003, 0.657053530216217, 0.37148767709732056, -0.7625799179077148, 0.9908065795898438, 0.028589949011802673, -0.28821083903312683, 0.012668677605688572, -0.17040680348873138, 0.12153108417987823, -1.0890477895736694, -1.4583144187927246, 0.11442051827907562, 0.31665095686912537, -0.31303587555885315, -0.4045180380344391, -0.6692622900009155, -1.2225627899169922, -0.19857849180698395, 0.6446403861045837, -0.15526574850082397, 1.645169973373413, -0.25053736567497253, -1.101062297821045, 0.3055846393108368, -0.34051311016082764, 0.5101953744888306, 0.5551688075065613, -0.4009148180484772, -0.87452232837677, -0.4319961369037628, 0.24136291444301605, 0.8563433289527893, 0.022838635370135307, -0.10009822994470596, -0.15625989437103271, 0.14750023186206818, 0.15717314183712006, 0.2504710853099823, -0.10365994274616241, 0.7231343388557434, -0.49791157245635986, -0.41256168484687805, 0.2559572160243988, 1.0810195207595825, -0.1459912210702896, -0.15373103320598602, -0.0614345446228981, -1.5446667671203613, 1.1945922374725342, 0.2850545644760132, 0.5174334645271301, -0.8914178609848022, -1.0924947261810303, -0.5106741189956665, -0.6097905039787292, 0.09505006670951843, -1.3619519472122192, 1.1826034784317017, 0.10801605135202408, 0.42024967074394226, 0.13678079843521118, -1.036381721496582, 0.06292659044265747, 0.05467888340353966, -0.5797343254089355, -0.6019136309623718, 0.16792456805706024, 1.2781270742416382, -1.4093104600906372, -0.15161661803722382, 0.0766955316066742, -0.10224166512489319, -0.9178056716918945, 1.063847303390503, -0.7903811931610107, 0.46813392639160156, -0.2723047435283661, -0.08376727253198624, -0.009778141044080257, 0.06156840920448303, 0.44382286071777344, -0.26875266432762146, -0.07288835197687149, 0.5652828812599182, -0.38858044147491455, 1.7059930562973022, -0.5565904378890991, 0.25249579548835754, -0.08666311204433441, -0.7171483039855957, -0.41833436489105225, 0.8930830359458923, -0.3984949588775635, -0.5571867227554321, 0.004908734932541847, 0.34680044651031494, -0.5996193289756775, -0.4149433970451355, 0.5961655378341675, 0.6039336323738098, -0.28125685453414917, 0.4332242012023926, 0.5807280540466309, -0.29500439763069153, 0.9810131788253784, 0.5914216637611389, 0.46919143199920654, 0.5197956562042236, 0.3935920000076294, 0.23209530115127563, 0.41956329345703125, -0.9165690541267395, -0.0727129876613617, 0.902704119682312, 0.31787434220314026, 0.6807990670204163, 0.5245005488395691, -0.4378802180290222, -0.3203381896018982, 0.05823734775185585, 0.8375526666641235, 1.6161507368087769, 0.18640318512916565, -0.30933135747909546, -0.7273670434951782, -0.9810507893562317, -0.4484986662864685, 0.6156144738197327, -0.2776218354701996, 0.384492427110672, -0.4854835867881775, -0.3726843297481537, 0.5537683963775635, 0.6094916462898254, 0.7248594164848328, -0.9061256647109985, 0.1791558712720871, 0.12314850091934204, 0.05969039350748062, -0.8815003633499146, -0.8192682266235352, -0.11855896562337875, -0.4208762049674988, -0.346059113740921, 0.02345356158912182, -0.31396639347076416, -0.010348236188292503, -0.42720621824264526, 0.9657548666000366, -0.5770165324211121, -0.3967079222202301, 0.4576551914215088, 0.10582359880208969, -0.6675647497177124, -0.9444461464881897, -0.433517187833786, 0.06949620693922043, -0.6953380703926086, 0.49336281418800354, 0.5079086422920227, 0.15563824772834778, 0.06786485016345978, -0.5592363476753235, 0.20570023357868195, 0.13984960317611694, 0.218816876411438, 0.8848064541816711, -0.5941994190216064, 0.6096762418746948, -1.2699775695800781, 1.1410187482833862, -0.0642775297164917, -0.5163702964782715, 0.5981668829917908, -0.5665361881256104, -0.9394903182983398, 0.6661398410797119, -0.8731741309165955, -0.3932601809501648, -0.9285930395126343, 0.1315544992685318, -0.21480949223041534, -0.4021415412425995, 0.5789307355880737, -0.050632014870643616, 0.5427154302597046, 0.4419783353805542, 0.2697523832321167, 0.3637014627456665, -0.14108766615390778, 1.0873171091079712, -0.9119418263435364, 0.11046389490365982, 0.012984039261937141, -0.20906640589237213, -0.32001081109046936, -0.3995346128940582, -0.6950519680976868, -0.40697991847991943, -0.5576565861701965, -0.27250936627388, -0.4144503176212311, -0.29519131779670715, -0.5346945524215698, -0.7313003540039062, -0.3929443657398224, -1.051317572593689, -0.46927928924560547, -0.18179909884929657, -0.01395866647362709, -0.2290848344564438, -0.779345691204071, -0.956139862537384, -0.26828742027282715, -0.45087340474128723, -0.8019241690635681, 0.3252733647823334, 0.07737275213003159, -0.39448732137680054, -0.6896402835845947, 0.06522852927446365, -0.5418663024902344, 0.6340845227241516, -0.9882270693778992, 0.7639626860618591, -0.26308444142341614, -0.01979183219373226, -0.6779901385307312, 0.273315966129303, 0.49323949217796326, 0.10638493299484253, -0.10272110998630524, -0.6439515948295593, 0.1939365714788437, -0.14681129157543182, -0.6949986815452576, -0.19817915558815002, 0.2005128413438797, 0.606406033039093, -0.0077816699631512165, -0.6558131575584412, -0.19530358910560608, 1.4408496618270874, -0.4083878993988037, -0.0969502329826355, -0.444579541683197, 0.8493975400924683, 0.6564834117889404, 0.26507768034935, 0.23044520616531372, 0.125802680850029, 0.1729571670293808, -0.3017122149467468, 0.46191710233688354, 0.004743133671581745, -0.530234158039093, 0.6642599701881409, 1.228458285331726, 0.6654265522956848, 0.01700511947274208, -0.8044018745422363, 0.7806248664855957, -1.6040587425231934, -0.7788543701171875, 1.0931000709533691, 0.6196362972259521, 0.3635319769382477, -0.8614032864570618, -0.4656534790992737, -0.3670952022075653, 0.31759220361709595, 0.40011832118034363, -0.3954351544380188, -0.26174888014793396, 0.13354995846748352, 0.18847636878490448, -0.5020808577537537, 0.7309814691543579, -0.49012964963912964, 0.7663477063179016, 14.589923858642578, 1.098509430885315, 0.29032835364341736, 0.716844379901886, 0.4417729377746582, 0.0013449511025100946, -0.6174262762069702, -0.12620477378368378, -1.360102653503418, -0.252148300409317, 0.9755406379699707, 0.13789309561252594, 0.5532689690589905, 0.18622715771198273, 0.5514985918998718, -0.1615927666425705, -0.9295157194137573, 0.507628321647644, 0.8425809144973755, -1.3668029308319092, 0.6298895478248596, -0.27869123220443726, 0.43492668867111206, 0.6421939730644226, 0.3254367411136627, 1.1031404733657837, 0.12834547460079193, -0.2788333594799042, 0.3103032112121582, -0.012292591854929924, 0.7314481735229492, -0.21338559687137604, 0.48296058177948, 0.7506349682807922, -0.616645336151123, -0.4917552173137665, -0.6812728047370911, -0.9259209632873535, 0.367401123046875, -0.15683630108833313, -0.5783560276031494, -0.39619776606559753, -0.11202558130025864, 0.7908071875572205, 0.3347007930278778, 0.304043710231781, -0.4938136637210846, 0.6988558173179626, -0.019404415041208267, -0.35682693123817444, 0.5936196446418762, 0.28480350971221924, 0.31640833616256714, 0.0542784184217453, 0.022422032430768013, 0.5444523692131042, 0.341596782207489, 0.6476919054985046, -0.7142673134803772, 0.4278240501880646, -0.6944644451141357, -0.10812792927026749, 0.11220839619636536, 0.6845453977584839, 0.5155908465385437, -0.046890415251255035, -0.7676841020584106, 0.2747117578983307, 0.635572075843811, 0.4562971293926239, 0.16980040073394775, -0.24987246096134186, -0.1535375416278839, -0.7110489010810852, -0.06024739146232605, 0.6485258936882019, 0.029900221154093742, -0.4640747606754303, -0.29270797967910767, 0.10772370547056198, -0.006972464267164469, -0.8481928110122681, -1.3805166482925415, 0.5241116285324097, 0.09267763793468475, -0.9287778735160828, -0.11107131093740463, -0.5261202454566956, -0.8487245440483093, 0.3853263258934021, -1.0156981945037842, -0.8873211145401001, 0.30342966318130493, -0.13868717849254608, 0.19964411854743958, 0.13067300617694855, 1.2573398351669312, 0.17616859078407288, -0.2974713444709778, 0.1585567444562912, 0.5117664337158203, -0.1653451770544052, 0.1909678876399994, -0.8877649903297424, 0.5366455912590027, 0.25136151909828186, 0.040516916662454605, 0.1847563236951828, -0.19592872262001038, -0.01943357288837433, -0.5220929384231567, -0.08606137335300446, 0.8822389245033264, -0.6607580780982971, -0.6714971661567688, -0.7491471767425537, -0.9799542427062988, 0.23987671732902527, 0.5340930223464966, 0.00676342798396945, 0.7826080918312073, 0.12031132727861404, -0.36024028062820435, -0.12185613065958023, -1.0345501899719238, 0.7630667090415955, 0.5749804973602295, -0.6036771535873413, -0.6893184185028076, 0.35500311851501465, 0.7010234594345093, -0.6802049875259399, -0.37928226590156555, -0.3986106216907501, 0.12602953612804413, 0.08786258101463318, 0.8448177576065063, -0.5019189119338989, 0.6800809502601624, 0.8185514211654663, -0.2341323345899582, -0.74925696849823, 0.4783787727355957, -0.9254136681556702, 0.2749426066875458, 0.28389185667037964, 0.8575295209884644, -0.1869765818119049, 0.18061093986034393, 1.1451138257980347, 0.35238125920295715, -0.5535867214202881, -0.6550537943840027, -0.5233508348464966, 0.314596563577652, -0.7628673315048218, 0.21003766357898712, -0.04316317290067673, 0.4121711850166321, 0.21583344042301178, 0.8397217988967896, 0.6284267902374268, -0.2280806452035904, -0.8272495865821838, 0.39597490429878235, 0.23436996340751648, 0.04725871607661247, -0.3186136782169342, 0.004935617558658123, -1.255750298500061, 0.3030098080635071, -1.3022654056549072, 0.3382497727870941, -0.9557898044586182, -0.47675812244415283, -0.014092043973505497, -0.1644909828901291, -0.19176676869392395, 0.10246440768241882, -0.6587969660758972, -0.3202398419380188, -0.5562683343887329, -0.879265308380127, 0.8494936227798462, 1.0184369087219238, -0.8429479002952576, -0.2535872161388397, 0.01027523260563612, 0.2553636133670807, 0.2149500697851181, 0.3822799026966095, -0.1967889964580536, -0.9669004082679749, -1.0892835855484009, -0.04676735773682594, 0.06578092277050018, -0.03293881565332413, -0.5191414952278137, 0.5440793037414551, 0.4621676802635193, 0.06523089855909348, -0.3284744918346405, 0.2408219426870346, -0.9610857367515564, -0.9389232397079468, -0.04311221092939377, -0.9674288630485535, 0.0156756192445755, -0.006065739784389734, -0.253598690032959, -0.5302034616470337, 0.2504427134990692, -0.2737029790878296, -1.2734882831573486, -0.9546514749526978, 0.3488629460334778, -0.8303791284561157, 0.20917917788028717, -0.14409852027893066, 0.16785293817520142, -0.5857611298561096, -0.41210371255874634, -0.11538232862949371, 0.7288229465484619, -0.60536128282547, 0.7437481880187988, 0.7560781240463257, -1.215671181678772, -0.05154212564229965, 0.24103087186813354, 0.32050180435180664, 0.06351082772016525, 0.9005263447761536, 0.32072725892066956, -0.21730904281139374, 0.24362073838710785, 0.4957696497440338, 0.24932193756103516, -1.0733251571655273, 0.14325492084026337, 0.6273210048675537, -0.5696215033531189, -0.26364240050315857, 0.9296594262123108, -0.4303898513317108, -1.2735867500305176, 0.445932000875473, -0.8874407410621643, -0.6365301012992859, -0.40723833441734314, 1.1906851530075073, 0.35917794704437256, -0.2284252643585205, 0.26643675565719604, -0.09880199283361435, 0.13398301601409912, -0.4802611172199249, -1.0034599304199219, 0.5329098105430603, -0.38533398509025574, -0.2474357634782791, 0.7574605345726013, 0.7915149927139282, -0.5438724160194397, -0.9683265686035156, -0.7211230993270874, -0.35083767771720886, -0.22376471757888794, -0.36989569664001465, -0.8203994631767273, 0.1262093335390091, 0.5355085134506226, 0.39497944712638855, 0.07724451273679733, -0.34175750613212585, 0.11446158587932587, 0.3479866683483124, 1.101357102394104, -0.015636274591088295, -0.9909115433692932, -0.25944286584854126, 1.1617602109909058, 1.441620945930481, -1.2221763134002686, -0.00951226893812418, -0.07484157383441925, -0.6553501486778259, 0.9359495639801025, 0.48879173398017883, -0.20902803540229797, 0.9820926189422607, -0.4199454188346863, 0.48679235577583313, 0.2863830029964447, -0.8693615794181824, 0.05248592793941498, 0.5311635732650757, 1.1879156827926636, 0.8057461977005005, 0.39741623401641846, -0.2713078260421753, 1.0039710998535156, 0.6331985592842102, 0.22838516533374786, 0.5677069425582886, 0.4272211790084839, -0.13811884820461273, -0.609358549118042, 0.3171372413635254, 0.5779378414154053, -0.6333152651786804, -0.7034915089607239, 0.04810738191008568, 0.7132446765899658, 0.24018606543540955, 0.9507933259010315, 0.49260902404785156, 0.3677363395690918, 0.5064729452133179, 0.5309609174728394, 0.5052134394645691, -0.7435476779937744, -0.288295716047287, -0.14117684960365295, -0.8283129334449768, -0.31148332357406616, -0.2023419290781021, -0.3895583152770996, -0.3700096607208252, 0.2731834053993225, 0.21509021520614624, -0.03159121423959732, 0.3420966565608978, 1.4006856679916382, 0.5572389364242554, -0.022541016340255737, -0.307802677154541, -0.5572789311408997, -0.560889720916748, -1.1851706504821777, -0.010714496485888958, -0.25028496980667114, -0.5679372549057007, 0.1690675914287567, -0.11757279932498932, -0.6892110705375671]}, "authors": [{"authorId": "2155447436", "name": "Xingxuan Li"}, {"authorId": "1399659909", "name": "Xuan-Phi Nguyen"}, {"authorId": "2708940", "name": "Shafiq R. Joty"}, {"authorId": "2211459675", "name": "Li Bing"}], "references": [{"paperId": "936f7f0fa77efcd322805b93a8d74c48a4108290", "title": "ChatGPT's One-year Anniversary: Are Open-Source Large Language Models Catching up?"}, {"paperId": "11b95e33f1a61079105e06090984b9dd8742887e", "title": "Contrastive Chain-of-Thought Prompting"}, {"paperId": "b217b6bc340af9a10bebbf8acc36ea30871769bd", "title": "In-Context Learning with Iterative Demonstration Selection"}, {"paperId": "1733eb7792f7a43dd21f51f4d1017a1bffd217b5", "title": "Lost in the Middle: How Language Models Use Long Contexts"}, {"paperId": "220cb18e8e005024a7ed1c1d41b4b6fa4774847f", "title": "Unlocking Temporal Question Answering for Large Language Models Using Code Execution"}, {"paperId": "c4235f0cd2011583703a70a27b60b62a85b43ea4", "title": "Is GPT-4 a Good Data Analyst?"}, {"paperId": "18143a4c2da37444e06feed04cc9efeb0856352d", "title": "Dr.ICL: Demonstration-Retrieved In-context Learning"}, {"paperId": "e468ed6b824e60f45ba9a20b034e4090c6630751", "title": "Chain-of-Knowledge: Grounding Large Language Models via Dynamic Knowledge Adapting over Heterogeneous Sources"}, {"paperId": "629c441076da3f8185b1cf85e8036064b714e249", "title": "Verify-and-Edit: A Knowledge-Enhanced Chain-of-Thought Framework"}, {"paperId": "163b4d6a79a5b19af88b8585456363340d9efd04", "title": "GPT-4 Technical Report"}, {"paperId": "e05483a41e8002e7024d39457e55a3fe533f5835", "title": "How Many Demonstrations Do You Need for In-context Learning?"}, {"paperId": "980e55d9226cac302d0fae7732da4e67b8bc952c", "title": "Parallel Context Windows for Large Language Models"}, {"paperId": "34ff1da13770908ef0bf389365cdde743d3c9db1", "title": "Diverse Demonstrations Improve In-context Compositional Generalization"}, {"paperId": "eecb45aa040064cbc0b37fd100706c02e7dc880e", "title": "Structured Prompting: Scaling In-Context Learning to 1, 000 Examples"}, {"paperId": "88b62496cbc52072bfa8f4b29d172b0477b701bc", "title": "Contrastive Decoding: Open-ended Text Generation as Optimization"}, {"paperId": "99832586d55f540f603637e458a292406a0ed75d", "title": "ReAct: Synergizing Reasoning and Acting in Language Models"}, {"paperId": "5f19ae1135a9500940978104ec15a5b8751bc7d2", "title": "Self-Consistency Improves Chain of Thought Reasoning in Language Models"}, {"paperId": "f9838a3be5c94bb2674a0e224de349b50e18f3c4", "title": "Learning To Retrieve Prompts for In-Context Learning"}, {"paperId": "d6045d2ccc9c09ca1671348de86d07da6bc28eea", "title": "Training Verifiers to Solve Math Word Problems"}, {"paperId": "a38e0f993e4805ba8a9beae4c275c91ffcec01df", "title": "Program Synthesis with Large Language Models"}, {"paperId": "89cff2d83ee5ddf9d631bc53668eb8baf260f3af", "title": "Ensemble deep learning: A review"}, {"paperId": "59641c10ed7431a3cf841f308367dc2dc0281b74", "title": "What Makes Good In-Context Examples for GPT-3?"}, {"paperId": "90abbc2cf38462b954ae1b772fac9532e2ccd8b0", "title": "Language Models are Few-Shot Learners"}, {"paperId": "8b0f27bb594b1eaaf493eaf1e2ee723a2b0a19ad", "title": "HellaSwag: Can a Machine Really Finish Your Sentence?"}, {"paperId": "88bb0a28bb58d847183ec505dda89b63771bb495", "title": "Think you have Solved Question Answering? Try ARC, the AI2 Reasoning Challenge"}, {"paperId": "92e121c6e114fe3cfb89370df03847c66a9b4e28", "title": "An Adversarial Winograd Schema Challenge at Scale"}, {"paperId": "9405cc0d6169988371b2755e573cc28650d14dfe", "title": "Language Models are Unsupervised Multitask Learners"}]}