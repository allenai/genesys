{"paperId": "f06631a0bb264571248fb1f269d633da53cdcd76", "abstract": "Popular guidance for denoising diffusion probabilistic model (DDPM) linearly combines distinct conditional models together to provide enhanced control over samples. However, this approach overlooks nonlinear effects that become significant when guidance scale is large. To address this issue, we propose characteristic guidance, a guidance method that provides first-principle non-linear correction for classifier-free guidance. Such correction forces the guided DDPMs to respect the Fokker-Planck (FP) equation of diffusion process, in a way that is training-free and compatible with existing sampling methods. Experiments show that characteristic guidance enhances semantic characteristics of prompts and mitigate irregularities in image generation, proving effective in diverse applications ranging from simulating magnet phase transitions to latent space sampling.", "venue": "arXiv.org", "year": 2023, "citationCount": 0, "influentialCitationCount": 0, "openAccessPdf": null, "tldr": {"model": "tldr@v2.0.0", "text": "Characteristic guidance is proposed, a guidance method that provides first-principle non-linear correction for classifier-free guidance in DDPMs, proving effective in diverse applications ranging from simulating magnet phase transitions to latent space sampling."}, "embedding": {"model": "specter_v2", "vector": [0.526705801486969, 0.6847091317176819, -0.21722419559955597, 0.02234433777630329, -0.4713197350502014, 0.09288116544485092, 0.8269438147544861, -0.0613219179213047, 0.13140547275543213, -0.9672475457191467, 0.21975357830524445, 0.2162366658449173, -0.0651831328868866, 0.09584777802228928, -0.23470638692378998, -0.7160114049911499, -1.1595227718353271, -0.017587661743164062, 0.03424721956253052, -0.2519324719905853, -0.2287195920944214, -0.1958380937576294, -0.7671762704849243, 0.16933441162109375, 0.49269402027130127, 0.8848425149917603, -0.08165208250284195, 1.1300584077835083, 0.06540100276470184, -0.02011401578783989, 0.5496547818183899, 0.5164589881896973, 0.5637598037719727, -0.13180574774742126, 0.42427942156791687, 0.41124048829078674, 0.17602764070034027, -0.3444732427597046, -0.6983959674835205, 0.7894883751869202, 0.0757233276963234, 0.25039058923721313, 0.9613797068595886, -0.48613491654396057, -0.8354987502098083, 0.1277501881122589, -0.1210295781493187, 0.7898715138435364, -0.006590652745217085, -0.3745895326137543, 0.7583152651786804, -0.9168179631233215, 0.31852367520332336, 1.498077392578125, 0.2919851243495941, 0.5227047801017761, -0.20701079070568085, -0.29906362295150757, 0.6802535057067871, -0.2633839547634125, -0.14643850922584534, -0.013437725603580475, 0.042107973247766495, -0.5323176383972168, 0.7159324288368225, -0.46592774987220764, 0.1508067101240158, 0.9418660998344421, 0.44241851568222046, 1.6881340742111206, 0.6756706237792969, -1.059739112854004, 0.26192036271095276, 0.08481809496879578, 0.4866248667240143, 0.5684152245521545, -0.7348888516426086, 1.106866478919983, -0.9964290857315063, -0.3518753945827484, 0.37201476097106934, -0.17573276162147522, -0.3600032329559326, -0.05711193010210991, 0.1968710571527481, 0.6278119683265686, 0.2396477609872818, 0.2612452805042267, -0.3277868926525116, 0.5755413770675659, 0.2578290104866028, 0.11877048760652542, 0.5343174338340759, -0.23568639159202576, 0.39752647280693054, 0.3504730761051178, -0.6361852884292603, 0.45884573459625244, -0.19430795311927795, 0.6739122271537781, -0.14026443660259247, 0.3188156485557556, -0.8512658476829529, 0.24710270762443542, 1.563997745513916, 0.6097965836524963, 0.40347734093666077, -0.7109735608100891, -0.24254563450813293, -1.1558114290237427, 0.39566847681999207, -0.9055655598640442, 0.13186319172382355, -0.008764342404901981, -1.1493120193481445, -0.6862266659736633, -0.47386595606803894, 0.11907258629798889, -1.3737268447875977, 0.4428357481956482, 0.049736641347408295, 0.1504766196012497, 0.023057373240590096, 0.7965627312660217, -0.09854129701852798, 0.8881365656852722, 0.03381408005952835, -0.07159222662448883, 0.5237856507301331, -0.8542218804359436, -0.8640600442886353, -0.8323314189910889, 0.00801493413746357, -0.40300214290618896, 0.28706517815589905, 0.4002409279346466, -0.9614481329917908, -1.107811689376831, -1.0979048013687134, 0.8107964396476746, 0.055114954710006714, 0.15714268386363983, 1.4035142660140991, 0.4070494771003723, -0.8570910096168518, 0.9564446210861206, -0.6979891657829285, -0.3159977197647095, 0.6766430139541626, -0.2909218668937683, 0.5292202234268188, -0.42698609828948975, -0.9540022611618042, 0.008934625424444675, -0.1722688525915146, -0.6470502614974976, -0.6628684401512146, -0.5694926381111145, -0.6656109690666199, -0.3518506586551666, 0.2110806554555893, -0.4112330675125122, 1.1818386316299438, 0.006464066915214062, -1.2035387754440308, 0.20547878742218018, -0.01753045618534088, 0.12024570256471634, 0.7012231349945068, -0.546230137348175, -0.7026915550231934, 0.3620226979255676, -0.007318561896681786, 0.4661366939544678, 1.1885700225830078, -0.6639381647109985, -0.06379536539316177, -0.06889782845973969, -0.6637865900993347, -0.41965171694755554, -0.128993958234787, 0.5797601342201233, -0.0947396531701088, -0.424259215593338, 0.34928882122039795, 0.45829471945762634, -0.5133880376815796, 0.07985788583755493, -0.2921765446662903, -0.8289716839790344, 1.2683887481689453, -0.08553258329629898, 0.3391306400299072, -1.1518752574920654, -1.2886067628860474, 0.19017484784126282, -0.17578408122062683, -0.40432706475257874, -0.533574104309082, 0.2204376757144928, -0.1450730264186859, -0.007225360721349716, -0.28268060088157654, -0.5675522089004517, -0.08822385221719742, -0.13000209629535675, -1.0274096727371216, 0.12461069971323013, 0.38286319375038147, 0.8088204264640808, -0.9188439249992371, 0.5659752488136292, -0.013034531846642494, 0.33596178889274597, -0.5800942182540894, 1.1316827535629272, -0.43266183137893677, 0.7242698073387146, -0.1835107058286667, 0.15831664204597473, 0.5402641892433167, -0.07812610268592834, 0.006164891179651022, -0.1596018373966217, 0.7200522422790527, 0.07084635645151138, -0.8521111011505127, 1.3415658473968506, 0.037582751363515854, 0.5108815431594849, 0.43863731622695923, -0.8022726774215698, 0.5817566514015198, 0.4754631221294403, 0.19472111761569977, -0.3895517587661743, 0.2808988094329834, 0.3725263178348541, -0.6928213238716125, 0.25426656007766724, 0.41232991218566895, 0.7271382212638855, -0.05898555368185043, 0.48197588324546814, 0.47684428095817566, -0.6739879250526428, 0.5432082414627075, 0.4201009273529053, 0.7485055923461914, 0.5300683975219727, -0.09484957158565521, -0.2779746353626251, -0.4669687747955322, -0.9842726588249207, -0.1987334042787552, 0.9749183058738708, 0.47996094822883606, 1.0518172979354858, 0.10034947842359543, -0.5496406555175781, -0.34520450234413147, -0.30790770053863525, 0.716904878616333, 0.8004280924797058, -0.07539138942956924, -0.15003515779972076, -0.7269735932350159, -0.6258127093315125, -0.28739437460899353, -0.3489450514316559, -0.5559824109077454, -0.1861056387424469, -0.1929933875799179, -1.305703043937683, 0.503995954990387, 0.2710823714733124, 0.7451369762420654, -0.3551046550273895, -0.13716164231300354, -0.22344200313091278, 1.0101215839385986, -0.6412981152534485, -0.42183777689933777, 0.5076830387115479, -0.5258628129959106, -0.4126049876213074, -0.3734210431575775, 0.3899022340774536, 0.4245142340660095, -0.5174884796142578, 0.5743186473846436, -0.5808454751968384, -0.5150406956672668, 1.0599030256271362, 0.24743084609508514, -0.9383028745651245, -0.7856284976005554, -0.24257029592990875, 0.28257277607917786, 0.04506316035985947, 0.2201496958732605, 0.13358721137046814, -0.0962168276309967, -0.008971254341304302, -0.5371032357215881, -0.4016367793083191, 0.15085114538669586, 0.023065190762281418, 0.6150375604629517, 0.0052436720579862595, 0.002932272618636489, -0.7096542119979858, 1.470697045326233, 0.06832896173000336, -0.42366650700569153, -0.3865950405597687, -1.1667901277542114, -0.537068247795105, 0.24886123836040497, -0.9143348336219788, -0.4785446226596832, -0.7510137557983398, 0.5355013012886047, -0.23022136092185974, -0.9301145076751709, -0.087091825902462, 0.5520128607749939, -0.12768618762493134, 1.001823902130127, 0.2286379635334015, 0.3534540832042694, 0.1829487383365631, 0.5473502278327942, -0.6388034224510193, 0.6472533345222473, -0.24756348133087158, 0.20197561383247375, 0.44489115476608276, -0.0010194897186011076, -1.1261650323867798, -0.4568209946155548, -0.3357751965522766, -0.3898974359035492, -0.5840383172035217, 0.06172935292124748, -0.618773341178894, -0.24520982801914215, 0.06483849883079529, -0.8786632418632507, -0.4217756688594818, -0.39232131838798523, -0.1923435479402542, -0.362186998128891, -0.7565001845359802, -1.55782949924469, -0.88034987449646, -0.6410121917724609, -0.845451831817627, 0.4325268566608429, 0.14975719153881073, -0.42165815830230713, -0.6387231945991516, -0.1885625571012497, -0.6290528178215027, 0.875147819519043, -0.2237645387649536, 0.4748123288154602, 0.029844580218195915, -0.39157986640930176, -0.3118387758731842, 0.46677282452583313, 0.7319861650466919, -0.1518665850162506, 0.5220767855644226, -1.0837639570236206, 0.10351655632257462, 0.18158507347106934, -0.0771976187825203, 0.4238049387931824, 1.0284574031829834, 0.47052839398384094, 0.1597105860710144, -0.4581100642681122, 0.27456769347190857, 0.8480715155601501, -0.43449345231056213, -0.0016318715643137693, 0.1486126035451889, 0.7965383529663086, 0.6699995994567871, 0.12727278470993042, 0.5825842022895813, -0.45436105132102966, 0.016397614032030106, -0.12284746021032333, -0.2923053801059723, -0.16936010122299194, -0.4153808653354645, 0.7034316062927246, 1.300723910331726, 0.5664533376693726, 0.18165059387683868, -0.7509601712226868, 0.5444843173027039, -1.277674674987793, -0.33161357045173645, 0.46078529953956604, 0.45666906237602234, -0.14286544919013977, -0.15547694265842438, -0.19632798433303833, 0.08996129035949707, 0.41946518421173096, 0.4929908514022827, -0.28525620698928833, -0.23898233473300934, -0.035439930856227875, 0.46790704131126404, 0.07779228687286377, 0.6486382484436035, -0.4382556676864624, -0.13336777687072754, 15.255454063415527, 1.0947518348693848, -0.1529727727174759, 0.5905262231826782, 0.9768090844154358, 0.8080019354820251, -0.30982375144958496, -0.12302293628454208, -0.827549934387207, 0.009040881879627705, 1.0007673501968384, 0.49770253896713257, 0.21721266210079193, 0.41717109084129333, 0.13902293145656586, -0.2518555223941803, -0.13958202302455902, 0.6494225263595581, 0.16038653254508972, -1.2081849575042725, 0.05692167952656746, 0.08242898434400558, 0.7295663356781006, 0.46674227714538574, 0.8728210926055908, 0.07816773653030396, 0.43577951192855835, -0.017705418169498444, 0.560522735118866, 0.27583563327789307, 0.5920196771621704, 0.00975686963647604, 0.07610059529542923, 0.5587530136108398, -0.6368528604507446, -0.023505253717303276, -0.5809080004692078, -0.8878151178359985, 0.6432966589927673, 0.9229932427406311, -0.23186662793159485, -0.28120943903923035, -0.025487635284662247, 0.9480679035186768, 0.1928434669971466, 0.15178588032722473, -0.5306380391120911, 1.0770156383514404, -0.22509190440177917, 0.5298743844032288, 0.3064188063144684, 0.04252387210726738, 0.4160257577896118, -0.12279395014047623, 0.24829642474651337, 0.01974022574722767, 0.7942647337913513, 0.4040932059288025, 0.07438201457262039, -0.28010159730911255, -0.40458303689956665, -0.13612954318523407, -0.5043246746063232, 1.0264893770217896, -0.17088717222213745, 0.1508333683013916, 0.06658570468425751, 0.40829265117645264, -0.12238270044326782, 0.42367151379585266, 0.20813849568367004, -0.034661464393138885, 0.017465054988861084, 0.00910318922251463, -0.22067508101463318, 0.3278086483478546, -0.5097626447677612, -0.21888600289821625, -0.5953534841537476, -0.1500798463821411, -0.034748077392578125, -0.8831719160079956, -1.2584035396575928, 0.7051470279693604, -0.08269593119621277, -0.0827011913061142, 0.3099400997161865, -0.6540293097496033, -0.7043403387069702, 0.42825138568878174, -0.8810644149780273, -0.6978077292442322, 0.08753940463066101, -0.38324156403541565, -0.42691710591316223, -0.13602563738822937, 0.8609591722488403, -0.19700028002262115, -0.0551745630800724, -0.4262758791446686, 0.15462487936019897, -0.5283099412918091, 0.21486212313175201, -1.0444605350494385, 0.8393310308456421, 0.5170212388038635, 0.14170441031455994, 0.0026480185333639383, 0.2978493571281433, -0.06181632727384567, -0.3653264343738556, 0.38770371675491333, -0.4843866229057312, -0.5588341951370239, -0.2981110215187073, -0.7180440425872803, -1.0655254125595093, -0.41640013456344604, 0.46326181292533875, 0.1771955043077469, 0.135872945189476, -0.03730113431811333, -0.10306534171104431, -0.21586717665195465, -0.7198050618171692, -0.32423147559165955, 0.032794706523418427, -0.6764106750488281, -0.10228052735328674, 0.2871800363063812, 0.14680054783821106, -1.2579455375671387, -0.36182019114494324, -0.2720907926559448, -0.09197361022233963, -0.35143759846687317, 0.8423740863800049, 0.03775510936975479, 0.46742767095565796, 0.64036625623703, -0.14557823538780212, -1.0964031219482422, -0.04697961360216141, -1.3092113733291626, -0.2725329101085663, 0.4981292486190796, 0.0557188019156456, -0.21223238110542297, 0.6930819749832153, 0.6967611908912659, 0.15479676425457, -0.5305047035217285, -0.2770712673664093, -0.26802322268486023, -0.0613102987408638, -1.0028101205825806, 0.06447049230337143, -0.37674254179000854, -0.5090053677558899, -0.11005068570375443, 0.3735586106777191, 0.7448614835739136, 0.2124357670545578, -0.6550588011741638, 0.3396458625793457, -0.2461942732334137, -0.19097210466861725, -0.14742285013198853, -0.187931090593338, -1.877482295036316, -0.4313509166240692, -0.8850404620170593, 0.08762621879577637, -0.8741387128829956, -0.721278727054596, -0.14673423767089844, -0.11105157434940338, -0.524284839630127, 0.28318339586257935, -0.46767356991767883, -0.3387828469276428, -0.20095162093639374, -0.37253043055534363, 0.8036814332008362, 1.219281554222107, -0.9985013008117676, -0.2494962066411972, 0.1283348798751831, -0.04658668860793114, 0.5136033892631531, 0.3332620859146118, -0.7172402143478394, -0.8110780715942383, -0.5933550596237183, 0.010537581518292427, -0.37641066312789917, 0.13713978230953217, -1.0247031450271606, 0.4325612783432007, 0.3558676838874817, 0.39416074752807617, 0.11019650846719742, 0.11956045776605606, -0.8456189036369324, -0.43947988748550415, -0.012620299123227596, -0.7739011645317078, -0.47870001196861267, -0.12592346966266632, 0.27965378761291504, -0.3260094225406647, 0.6713338494300842, 0.283826619386673, -1.0112844705581665, -0.159433051943779, 0.6366199851036072, -0.8233887553215027, 0.08152368664741516, -0.31733328104019165, -0.0750805214047432, -0.9662628769874573, -0.4562400281429291, -0.47501951456069946, -0.04698967561125755, -0.28161004185676575, 0.8549160957336426, 0.34538769721984863, -1.3798781633377075, 0.4245297312736511, 0.4337795674800873, -0.5474622845649719, 0.4639226794242859, 0.6193113923072815, 0.4203723669052124, 0.06308837980031967, 0.19279861450195312, 0.34070464968681335, -0.23580239713191986, -0.3770969808101654, -0.05783794820308685, 0.5255648493766785, -0.37438225746154785, -0.527029275894165, 0.9981058835983276, -0.04224558547139168, -1.010679006576538, 0.14097042381763458, -0.9432753324508667, -0.32542166113853455, -0.2851199805736542, 0.8363549113273621, 0.3920043706893921, -0.16256441175937653, 0.22307543456554413, 0.1043190211057663, 0.3083004653453827, -0.2626776397228241, -0.6931026577949524, 0.735700786113739, -0.34794360399246216, 0.07954635471105576, 0.4843447506427765, 0.17003093659877777, -0.4637521505355835, -1.5952726602554321, -0.49181777238845825, -0.2091219276189804, -0.5749139785766602, 0.1797778159379959, -0.4420008659362793, -0.7185339331626892, 0.9611244201660156, 1.3267786502838135, 0.5485460162162781, 0.2893203794956207, -0.17323032021522522, 0.24645061790943146, 0.17704646289348602, 0.04201531037688255, -1.0781289339065552, -0.0939413532614708, 0.7202040553092957, 0.9806737899780273, -0.6448067426681519, 0.5603033900260925, -0.20540812611579895, -0.712487518787384, 1.1104142665863037, 0.2532413899898529, -0.25358399748802185, 1.1920976638793945, -0.22369934618473053, 0.5582298636436462, -0.2376784086227417, -0.5295149683952332, 0.07764614373445511, 0.7593293786048889, 1.7805289030075073, 0.13884972035884857, 0.1780032068490982, 0.36496755480766296, 0.9666820168495178, 0.6506771445274353, 0.26852384209632874, 0.674211859703064, 0.7410768866539001, -0.3954356014728546, -0.22699058055877686, -0.5235804915428162, 0.9441775679588318, -0.9723881483078003, 0.07514441013336182, 0.5435629487037659, 0.36534467339515686, 0.02410820499062538, 0.7267734408378601, 0.45815083384513855, 0.19448381662368774, 0.45028257369995117, -0.2378302961587906, 0.43352413177490234, -0.42847001552581787, -0.08934275805950165, 0.5934793949127197, -0.842387855052948, -0.4193025231361389, -0.45291703939437866, -0.43499287962913513, -0.34106308221817017, 0.012275205925107002, 0.28055059909820557, 0.022402314469218254, 0.21189160645008087, 0.850256085395813, 0.6292319297790527, 0.30895403027534485, -0.11360309273004532, -1.1035847663879395, -0.4956645667552948, -0.8282304406166077, -0.6331441402435303, -0.2253379076719284, -0.09963703155517578, -0.4540959894657135, -0.6764991283416748, 0.07266895473003387]}, "authors": [{"authorId": "2277418634", "name": "Candi Zheng"}, {"authorId": "2274015496", "name": "Yuan Lan"}], "references": [{"paperId": "d7890d1906d95c4ae4c430b350455156d6d8aed9", "title": "SDXL: Improving Latent Diffusion Models for High-Resolution Image Synthesis"}, {"paperId": "ce06533ecc98ba221a4db427738884c6a6af6eee", "title": "FreeDoM: Training-Free Energy-Guided Conditional Diffusion Model"}, {"paperId": "d24b4f34197df0257390b57f02537e6ce3284f2e", "title": "Universal Guidance for Diffusion Models"}, {"paperId": "62d6e95e60ba36abacc5de85078d053316bd1942", "title": "UniPC: A Unified Predictor-Corrector Framework for Fast Sampling of Diffusion Models"}, {"paperId": "6ae2e3d5682e755d560c34b05169a9660660f055", "title": "ShiftDDPMs: Exploring Conditional Diffusion Models by Shifting Diffusion Trajectories"}, {"paperId": "4ff52e24e02116b675abf085642b0de38f30b1eb", "title": "Refining Generative Process with Discriminator Guidance in Score-based Diffusion Models"}, {"paperId": "baa4f95081e9663fb045d145acc70049ace16ac9", "title": "DPM-Solver++: Fast Solver for Guided Sampling of Diffusion Probabilistic Models"}, {"paperId": "b627684e2b9d6f12c88a3791d6eff5aec1c6ce09", "title": "FP-Diffusion: Improving Score-based Diffusion Models by Enforcing the Underlying Score Fokker-Planck Equation"}, {"paperId": "0eca1993fd78649aa94c49a73277546aeeb76e21", "title": "Improving Sample Quality of Diffusion Models Using Self-Attention Guidance"}, {"paperId": "3a5403db5c8eef7bb0229c98e10419629c4a4486", "title": "On Investigating the Conservative Property of Score-Based Generative Models"}, {"paperId": "e342165a614588878ad0f4bc9bacf3905df34d08", "title": "Diffusion Models: A Comprehensive Survey of Methods and Applications"}, {"paperId": "17d068e78e6f25e65cb08319b19b58279bb8b214", "title": "Understanding Diffusion Models: A Unified Perspective"}, {"paperId": "af9f365ed86614c800f082bd8eb14be76072ad16", "title": "Classifier-Free Diffusion Guidance"}, {"paperId": "2f4c451922e227cbbd4f090b74298445bbd900d0", "title": "Elucidating the Design Space of Diffusion-Based Generative Models"}, {"paperId": "82482585e94192b4e9913727e461f89cd08e9725", "title": "Pseudo Numerical Methods for Diffusion Models on Manifolds"}, {"paperId": "c10075b3746a9f3dd5811970e93c8ca3ad39b39d", "title": "High-Resolution Image Synthesis with Latent Diffusion Models"}, {"paperId": "64ea8f180d0682e6c18d1eb688afdb2027c02794", "title": "Diffusion Models Beat GANs on Image Synthesis"}, {"paperId": "633e2fbfc0b21e959a244100937c5853afca4853", "title": "Score-Based Generative Modeling through Stochastic Differential Equations"}, {"paperId": "014576b866078524286802b1d0e18628520aa886", "title": "Denoising Diffusion Implicit Models"}, {"paperId": "5c126ae3421f05768d8edd97ecd44b1364e2c99a", "title": "Denoising Diffusion Probabilistic Models"}, {"paperId": "965359b3008ab50dd04e171551220ec0e7f83aba", "title": "Generative Modeling by Estimating Gradients of the Data Distribution"}, {"paperId": "231af7dc01a166cac3b5b01ca05778238f796e41", "title": "GANs Trained by a Two Time-Scale Update Rule Converge to a Local Nash Equilibrium"}, {"paperId": "571b0750085ae3d939525e62af510ee2cee9d5ea", "title": "Improved Techniques for Training GANs"}, {"paperId": "2dcef55a07f8607a819c21fe84131ea269cc2e3c", "title": "Deep Unsupervised Learning using Nonequilibrium Thermodynamics"}, {"paperId": "872bae24c109f7c30e052ac218b17a8b028d08a0", "title": "A Connection Between Score Matching and Denoising Autoencoders"}, {"paperId": "a336b26d37f00182a758acf0156b330b8b73cb27", "title": "Anderson Acceleration for Fixed-Point Iterations"}, {"paperId": "3efcb97c1de1c87832a7a1d99e91801992a938ec", "title": "Crafting Papers on Machine Learning"}, {"paperId": "c7a5128b45edb4db9105ec5167210b887617ddf2", "title": "Reverse-time diffusion equation models"}, {"paperId": "6aeb22e31b1d808754bfca8ba2bf597d92972d06", "title": "On the theory of brownian motion"}, {"paperId": null, "title": "CagliostroLab"}, {"paperId": null, "title": "Characteristic Guidance: Non-linear Correction for Diffusion Model at Large Guidance Scale"}, {"paperId": null, "title": "Sd-dynamic-thresholding: A dynamic thresholding method for stable diffusion"}]}