{"paperId": "2edad183188648d6ab735cff0c5bbea67d5e2645", "abstract": "We introduce segmentation-free guidance, a novel method designed for text-to-image diffusion models like Stable Diffusion. Our method does not require retraining of the diffusion model. At no additional compute cost, it uses the diffusion model itself as an implied segmentation network, hence named segmentation-free guidance, to dynamically adjust the negative prompt for each patch of the generated image, based on the patch's relevance to concepts in the prompt. We evaluate segmentation-free guidance both objectively, using FID, CLIP, IS, and PickScore, and subjectively, through human evaluators. For the subjective evaluation, we also propose a methodology for subsampling the prompts in a dataset like MS COCO-30K to keep the number of human evaluations manageable while ensuring that the selected subset is both representative in terms of content and fair in terms of model performance. The results demonstrate the superiority of our segmentation-free guidance to the widely used classifier-free method. Human evaluators preferred segmentation-free guidance over classifier-free 60% to 19%, with 18% of occasions showing a strong preference. Additionally, PickScore win-rate, a recently proposed metric mimicking human preference, also indicates a preference for our method over classifier-free.", "venue": "", "year": 2024, "citationCount": 0, "influentialCitationCount": 0, "openAccessPdf": null, "tldr": {"model": "tldr@v2.0.0", "text": "S segmentation-free guidance is introduced, a novel method designed for text-to-image diffusion models like Stable Diffusion that uses the diffusion model itself as an implied segmentation network to dynamically adjust the negative prompt for each patch of the generated image, based on the patch's relevance to concepts in the prompt."}, "embedding": {"model": "specter_v2", "vector": [0.23874531686306, 0.31257158517837524, -0.7425994873046875, -0.06728585064411163, -0.3437412679195404, -0.26607370376586914, 0.7508220076560974, -0.060004282742738724, -0.4672655165195465, -0.8017821907997131, 0.06087378412485123, 0.2111334502696991, 0.2187219262123108, 0.27936887741088867, -0.14025020599365234, -0.2200164496898651, -1.0172826051712036, 0.000852477562148124, 0.5990149974822998, -0.5538069009780884, -0.03475036472082138, -0.61285799741745, -0.8013522028923035, 0.2578866183757782, 0.6103039383888245, 0.8206033706665039, -0.17637647688388824, 1.2899121046066284, -0.30250439047813416, 0.1430535912513733, 0.2140927016735077, -0.21925944089889526, 0.5993703007698059, -0.0036082814913243055, -0.16077207028865814, 0.26094019412994385, 0.28512275218963623, -0.40435341000556946, -0.23081132769584656, 0.5969446301460266, 0.0005890919710509479, 0.2179492861032486, 0.6903701424598694, -0.37096521258354187, -0.5881724953651428, 0.3608974516391754, 0.27442026138305664, 0.9133874177932739, 0.29748138785362244, -0.4048451781272888, 0.973259687423706, -1.1013191938400269, 0.8637747168540955, 1.4021862745285034, 0.06348898261785507, 0.40181440114974976, -0.16084948182106018, -0.2546972632408142, 1.0011366605758667, 0.01376675721257925, -0.7103632688522339, 0.04816226288676262, -0.10218709707260132, -0.6617526412010193, 1.1577448844909668, -0.29793035984039307, -0.018415402621030807, 0.9220380783081055, 0.30294832587242126, 1.6788536310195923, 0.2589658796787262, -0.9751571416854858, 0.1923140436410904, 0.10657065361738205, 0.388559490442276, 0.5028627514839172, -0.5604546666145325, 0.5584637522697449, -0.7407057881355286, -0.18000444769859314, 0.4224594235420227, -0.183928981423378, -0.10585770010948181, -0.17088107764720917, -0.005725809372961521, 0.7390607595443726, 0.5387584567070007, 0.7480341792106628, -0.20595572888851166, 0.441708505153656, 0.4196091294288635, 0.4578986167907715, 0.48378241062164307, -0.16362252831459045, 0.012368167750537395, 0.49166354537010193, -0.8566235899925232, 0.7056146264076233, -0.004622294567525387, 0.862590491771698, -0.32418206334114075, -0.31239303946495056, -1.032718300819397, 0.41978979110717773, 1.0928486585617065, 0.012201441451907158, 0.6967458128929138, -0.8185780644416809, -0.15413090586662292, -0.8549581170082092, 0.5927613377571106, -1.256615161895752, 0.04345196858048439, 0.1454923003911972, -0.6701523065567017, -0.8863962888717651, -0.2842032313346863, -0.03663833811879158, -1.0746896266937256, 0.44723618030548096, 0.13703884184360504, -0.0267744529992342, -0.18825995922088623, 0.8989115953445435, 0.39268824458122253, 0.5104501843452454, 0.5124988555908203, -0.021361099556088448, 0.5008382797241211, -1.115509271621704, -0.5276002287864685, -0.5958320498466492, 0.5145505666732788, -0.5842357873916626, 0.33246827125549316, -0.18661034107208252, -0.7738761901855469, -1.0044595003128052, -0.9876776337623596, 0.5667564272880554, -0.38630303740501404, 0.12632402777671814, 0.9559637308120728, 0.3675900399684906, -1.2054225206375122, 0.8653090596199036, -0.17025123536586761, -0.6178315281867981, 0.5388393402099609, -0.5254196524620056, 0.47577300667762756, -0.5268014073371887, -1.1627171039581299, 0.021228598430752754, -0.3056853711605072, -0.928061306476593, -0.31064078211784363, -0.22615736722946167, -0.5966032147407532, -0.62113356590271, 0.6729940176010132, -0.3725017309188843, 1.4852180480957031, -0.7019707560539246, -0.9821494817733765, 0.357532262802124, -0.040767181664705276, 0.09713693708181381, 1.0918147563934326, -0.34472593665122986, -0.4328952133655548, 0.27393007278442383, 0.0920007973909378, 1.0451394319534302, 0.8809120059013367, -0.5081024169921875, -0.15509767830371857, 0.3220188319683075, -0.18578962981700897, 0.003343323478475213, -0.042403444647789, 0.762106716632843, -0.4533737003803253, -0.829826831817627, 0.14708060026168823, 0.5074012875556946, -0.6054140329360962, 0.18694868683815002, -0.13506832718849182, -1.0323197841644287, 0.984407365322113, -0.05805708467960358, 0.6546736359596252, -0.7410851716995239, -0.9602099061012268, -0.19061212241649628, -0.25363823771476746, -0.2769505977630615, -0.9023129343986511, 0.29161277413368225, -0.044066864997148514, 0.6923777461051941, -0.08713208884000778, -0.7409623265266418, -0.09749902039766312, -0.2876623272895813, -0.559341311454773, -0.434162974357605, 0.05156726390123367, 1.168389081954956, -0.7377468347549438, 0.1171221137046814, -0.3866146504878998, 0.13180890679359436, -0.6544726490974426, 0.9543495774269104, -0.9127534627914429, 0.3723730146884918, -0.3028334677219391, -0.006764038931578398, 0.33906272053718567, -0.27291423082351685, -0.10345862805843353, -0.02026630938053131, 0.20078223943710327, -0.3158153295516968, -0.4546229839324951, 1.5618724822998047, 0.3438781201839447, 0.2802269160747528, 0.11221655458211899, -0.4755427837371826, 0.26069262623786926, 0.4587755799293518, 0.03720160573720932, -0.35439324378967285, 0.24121643602848053, 0.18308418989181519, -0.810992956161499, 0.20729520916938782, 0.8892629742622375, 1.0742193460464478, -0.4162997901439667, 0.2404472678899765, 0.36068060994148254, -0.34744685888290405, 0.6075048446655273, 0.8154675364494324, 0.4986979365348816, 0.5677226781845093, -0.17430460453033447, -0.19496972858905792, -0.13210543990135193, -0.5766218304634094, -0.35515260696411133, 0.9352922439575195, 0.3083916902542114, 0.853029191493988, 0.3173113167285919, -0.749117374420166, -0.04759955406188965, 0.20245440304279327, 0.843131422996521, 1.397312045097351, 0.20880921185016632, -0.3721310496330261, -1.3304600715637207, -0.770091712474823, -0.5883591771125793, -0.28056010603904724, -0.7874428033828735, 0.14948789775371552, -0.018892306834459305, -1.1513441801071167, 0.4305174946784973, 0.14932653307914734, 0.9752052426338196, -0.26733869314193726, -0.547132670879364, -0.18889717757701874, 0.1703651398420334, -0.4583829939365387, -0.8902722597122192, 0.09291170537471771, -0.4260067939758301, -0.2759677767753601, -0.7971072196960449, -0.03094024583697319, 0.09783840924501419, -0.14749036729335785, 0.3988696336746216, -0.01226409524679184, -0.6656526923179626, 0.7397395968437195, -0.10524966567754745, -0.6826190948486328, -0.6262853145599365, 0.1120958924293518, -0.12199536710977554, -0.015186010859906673, -0.04813526198267937, 1.0749536752700806, -0.3148074150085449, 0.5563941597938538, -0.9182974696159363, -0.09174392372369766, -0.2109193354845047, -0.05888837203383446, 0.5854721069335938, -0.14066585898399353, 0.03939434513449669, -0.8347265720367432, 1.5093698501586914, 0.07176285237073898, -0.227964848279953, 0.023226851597428322, -1.1030794382095337, -1.0056527853012085, -0.13257257640361786, -1.0912153720855713, -0.44239723682403564, -0.7816390991210938, 0.5111830234527588, -0.0929647758603096, -0.5695410966873169, 0.3354926109313965, 0.7253521084785461, -0.08950497955083847, 1.1358239650726318, -0.003090654266998172, 0.20451262593269348, -0.14336715638637543, 0.8873744606971741, -0.6005831360816956, 0.4847063422203064, 0.08839543908834457, -0.27119940519332886, 0.246738463640213, -0.6113734841346741, -1.021571159362793, -0.2959066927433014, -0.4185360074043274, -0.430940717458725, -0.7140068411827087, 0.2399878203868866, -0.4383712708950043, -0.10046132653951645, 0.3775272071361542, -0.9515906572341919, -0.6320468783378601, 0.05034985393285751, -0.7114080190658569, -0.426215797662735, -0.6786537766456604, -1.3666720390319824, -0.3568001389503479, -0.5293778777122498, -1.0401628017425537, 0.24730050563812256, 0.25698670744895935, -0.6024544835090637, -0.5898367166519165, -0.059308551251888275, -0.6178174018859863, 1.1952710151672363, -0.26616308093070984, 0.3831210434436798, -0.07939580082893372, -0.41274428367614746, -0.762097179889679, 0.34539881348609924, 0.437111496925354, -0.1819227933883667, 0.4800458252429962, -0.6741628646850586, 0.06822174787521362, 0.21853090822696686, -0.11089660972356796, 0.38533928990364075, 0.6918268203735352, 0.47530418634414673, -0.24256493151187897, -0.8568124771118164, -0.07169221341609955, 1.096367359161377, -0.5614091157913208, -0.1136220246553421, 0.09436957538127899, 0.6193166375160217, 0.5625015497207642, 0.20829693973064423, 0.4536329507827759, 0.23211117088794708, 0.4084315299987793, -0.2528391480445862, -0.4374941289424896, -0.21540850400924683, -0.45335853099823, 0.5383836627006531, 1.3811664581298828, 0.4476209878921509, -0.1661055088043213, -0.7476752400398254, 0.515336275100708, -1.4187144041061401, -0.6679994463920593, 0.5724601745605469, 0.45431721210479736, 0.0851278007030487, -0.38411247730255127, 0.14924441277980804, -0.35375964641571045, 0.552345871925354, 0.3909960985183716, -0.32347366213798523, -0.2375340610742569, -0.1842055320739746, 0.08524401485919952, -0.07803326845169067, 0.7326793074607849, -0.6115627884864807, 0.644577145576477, 15.256170272827148, 1.3677672147750854, -0.3618791699409485, 0.5187665224075317, 1.2208508253097534, 0.5410285592079163, -0.19775697588920593, -0.09485363215208054, -0.6059593558311462, -0.1313246488571167, 0.8895034790039062, 0.0921902284026146, 0.24999196827411652, 0.24722087383270264, 0.18974238634109497, -0.4593159854412079, 0.16083361208438873, 0.30954694747924805, 0.4936949610710144, -1.1743625402450562, 0.251997709274292, -0.05505172163248062, 0.5559288263320923, 0.6833035349845886, 0.7493547201156616, 0.25605541467666626, 0.43541955947875977, -0.14695408940315247, 0.7748270034790039, 0.3635523319244385, 0.7713454365730286, 0.21466931700706482, 0.12890543043613434, 0.4583239257335663, -0.5595521330833435, -0.018813010305166245, -0.49006837606430054, -0.6968113780021667, 0.40022042393684387, 0.19528000056743622, -0.3301472067832947, -0.25886401534080505, 0.12175525724887848, 0.800768256187439, -0.3325539827346802, 0.4532970190048218, -0.11901436746120453, 0.8018833994865417, 0.129348486661911, -0.03300279378890991, 0.31760701537132263, 0.41611358523368835, 0.5058174729347229, 0.28902047872543335, -0.026089144870638847, 0.05622478574514389, 0.56988525390625, 0.16032834351062775, -0.2570593059062958, 0.6214191913604736, -0.40887656807899475, 0.22851037979125977, -0.49514448642730713, 1.0590736865997314, -0.36435186862945557, -0.06691822409629822, -0.09409981220960617, 0.6423489451408386, 0.1304314285516739, 0.46543166041374207, -0.19355453550815582, 0.005824655760079622, -0.09000410884618759, 0.005765934940427542, -0.05660620704293251, 0.4394446611404419, -0.1700221598148346, -0.4966377317905426, -0.8090693354606628, -0.20557385683059692, 0.391506165266037, -0.9452879428863525, -1.0563265085220337, 1.156269907951355, 0.09768830239772797, -0.19792164862155914, 0.34320124983787537, -0.3476949632167816, -0.40218424797058105, 0.38901934027671814, -1.084932804107666, -0.4862789511680603, 0.09770325571298599, -0.302010715007782, -0.05376257747411728, 0.19370803236961365, 0.9234133362770081, -0.30365368723869324, -0.03070491924881935, -0.04003904387354851, 0.19178947806358337, -0.18903681635856628, 0.472098171710968, -0.7023425102233887, 0.9441169500350952, 0.16570501029491425, -0.015451212413609028, 0.0048697711899876595, -0.16287866234779358, -0.1804577112197876, -0.1437167525291443, -0.08036210387945175, -0.08211680501699448, -0.6787867546081543, -0.4770182967185974, -0.5634257197380066, -1.1485481262207031, -0.30430158972740173, 0.9166982173919678, -0.1384805142879486, 0.35280582308769226, -0.24761095643043518, -0.3645235598087311, 0.03055064007639885, -0.8985603451728821, 0.3377400040626526, 0.23783428966999054, -0.34936439990997314, 0.09945090115070343, 0.14233070611953735, 0.6049707531929016, -1.1977819204330444, -0.34082353115081787, -0.47204434871673584, -0.11818496882915497, -0.16867445409297943, 0.720645010471344, -0.2809441089630127, 0.31822922825813293, 0.9072875380516052, -0.2422288954257965, -0.9614960551261902, -0.14590351283550262, -1.3331800699234009, 0.45766761898994446, 0.2502363622188568, 0.7644792199134827, -0.1869181990623474, 0.3292502462863922, 1.1937575340270996, 0.6443307995796204, -0.5888888239860535, -0.35664746165275574, -0.19376040995121002, 0.517418622970581, -0.7355291843414307, 0.014610826969146729, -0.26903554797172546, -0.0162438303232193, -0.1770850121974945, 0.4665662944316864, 0.12179242074489594, -0.2023276686668396, -0.8414649963378906, 0.5037537217140198, -0.17417025566101074, 0.2977670729160309, -0.6714937686920166, -0.1451544314622879, -1.7789127826690674, -0.5968928933143616, -1.058223843574524, 0.14141996204853058, -0.8244915008544922, -0.5449256896972656, -0.04921307414770126, -0.044309671968221664, -0.2646355926990509, 0.2794584631919861, -0.5280699729919434, -0.19912271201610565, -0.04129219800233841, -0.7941936254501343, 0.4368917942047119, 1.2611695528030396, -0.9581422805786133, -0.12038309872150421, -0.22046619653701782, -0.2747815251350403, 0.38938087224960327, 0.4626041352748871, -0.4947264492511749, -0.6675917506217957, -0.7325193881988525, -0.08559776842594147, -0.1441923826932907, 0.0894632488489151, -0.4490510821342468, 0.5873299241065979, 0.24433401226997375, 0.1254514902830124, 0.26640406250953674, -0.17016038298606873, -0.4343146085739136, -0.5357895493507385, 0.0586729496717453, -1.023418664932251, 0.030950836837291718, -0.028133641928434372, 0.16354146599769592, -0.09185389429330826, 0.640296995639801, 0.16849705576896667, -1.1375949382781982, -0.6043941974639893, 0.6345327496528625, -0.9995210766792297, 0.29406291246414185, -0.21200743317604065, -0.19357891380786896, -1.0101124048233032, -0.48437389731407166, -0.6018832325935364, 0.21140815317630768, 0.03597645089030266, 1.4440631866455078, 0.1715792417526245, -1.2369335889816284, 0.2037336677312851, 0.02102840319275856, -0.18896226584911346, 0.10956117510795593, 0.9263963103294373, 0.3657587766647339, -0.2239898443222046, 0.06637688726186752, 0.501503050327301, -0.13490231335163116, -0.5480498671531677, 0.24716819822788239, 0.7099395990371704, -0.06540678441524506, -0.2520391643047333, 0.9164683818817139, -0.19389137625694275, -0.6490461826324463, 0.24143846333026886, -1.0431008338928223, -0.47554510831832886, -0.1130538135766983, 0.7369106411933899, 0.4299982190132141, 0.055695805698633194, -0.2750993072986603, -0.08017134666442871, 0.37395283579826355, -0.468084454536438, -0.9645871520042419, 0.14730095863342285, -0.6677537560462952, -0.027731599286198616, 0.28163450956344604, 0.3184358775615692, -0.6071155071258545, -1.102616786956787, -0.5056004524230957, -0.08365365117788315, -0.4815053939819336, -0.12811781466007233, -0.862286388874054, -0.5021101236343384, 0.5455546379089355, 1.0725945234298706, 0.6923043131828308, -0.07613783329725266, -0.009576444514095783, 0.048545122146606445, 0.10818704962730408, 0.23632830381393433, -1.030904769897461, 0.006438350770622492, 0.529691219329834, 1.3730131387710571, -0.7361268997192383, 0.2821480631828308, -0.25774601101875305, -0.9414775967597961, 0.7904682755470276, 0.3546794056892395, -0.10430499166250229, 1.2927905321121216, -0.41299355030059814, 1.0584434270858765, 0.16898353397846222, -0.8771984577178955, 0.14215455949306488, 0.7993411421775818, 1.5319161415100098, 0.23585577309131622, 0.37257933616638184, -0.15568460524082184, 0.8405928611755371, 0.5541881918907166, 0.41189855337142944, 0.9014474749565125, 0.5170242190361023, -0.4337445795536041, -0.19152455031871796, -0.11316397041082382, 0.5715801119804382, -0.9132288694381714, 0.06087793409824371, -0.10434139519929886, 0.43497106432914734, 0.178786501288414, 0.8452605605125427, 0.4019530415534973, -0.04338767006993294, 0.483487069606781, -0.04744020476937294, 0.22275029122829437, -0.22174204885959625, -0.28908097743988037, 0.595506489276886, -1.1153254508972168, -0.20627784729003906, -0.365045428276062, -0.7283398509025574, -0.0226166769862175, -0.08601564913988113, 0.15378017723560333, -0.17241208255290985, 0.06419896334409714, 0.6933099031448364, 0.8731049299240112, -0.08494873344898224, -0.3012261390686035, -0.8044754862785339, -0.29374492168426514, -0.9020059108734131, 0.11458528786897659, -0.18214091658592224, -0.33705660700798035, -0.4239354729652405, -0.19258421659469604, 0.06258899718523026]}, "authors": [{"authorId": "2075053", "name": "K. Azarian"}, {"authorId": "49950690", "name": "Debasmit Das"}, {"authorId": "2310343708", "name": "Qiqi Hou"}, {"authorId": "2253777162", "name": "F. Porikli"}], "references": [{"paperId": "d7890d1906d95c4ae4c430b350455156d6d8aed9", "title": "SDXL: Improving Latent Diffusion Models for High-Resolution Image Synthesis"}, {"paperId": "cf694df964caa156ec306b45d3a3127533cb458f", "title": "Pick-a-Pic: An Open Dataset of User Preferences for Text-to-Image Generation"}, {"paperId": "d24b4f34197df0257390b57f02537e6ce3284f2e", "title": "Universal Guidance for Diffusion Models"}, {"paperId": "3a75ed3e9e81c9db573ef73d20e2c66c12aaedf8", "title": "Zero-Shot Image Restoration Using Denoising Diffusion Null-Space Model"}, {"paperId": "e24f4b28167b05fbf7d29000490fc0a4e4c109c7", "title": "eDiff-I: Text-to-Image Diffusion Models with an Ensemble of Expert Denoisers"}, {"paperId": "61e46884567be7cad12e999365b16a8d3414b678", "title": "Diffusion Posterior Sampling for General Noisy Inverse Problems"}, {"paperId": "525f459f369032e2f2fa3eb1d60da34ab99191bc", "title": "Cold Diffusion: Inverting Arbitrary Image Transforms Without Noise"}, {"paperId": "af9f365ed86614c800f082bd8eb14be76072ad16", "title": "Classifier-Free Diffusion Guidance"}, {"paperId": "e79614372e420f1211ab7afd0676af1a98b3d657", "title": "Semantic Image Synthesis via Diffusion Models"}, {"paperId": "c6ed10c736620d3103782012944693c9e05e4a5d", "title": "A Study on the Evaluation of Generative Models"}, {"paperId": "44b3fb61bec49f5e4d8a3b81ddc6082aedd771fe", "title": "Diffusion models as plug-and-play priors"}, {"paperId": "b3f5cf32178bcbed91aa5303b70963c6463f48a2", "title": "Improving Diffusion Models for Inverse Problems using Manifold Constraints"}, {"paperId": "9695824d7a01fad57ba9c01d7d76a519d78d65e7", "title": "Photorealistic Text-to-Image Diffusion Models with Deep Language Understanding"}, {"paperId": "c57293882b2561e1ba03017902df9fc2f289dea2", "title": "Hierarchical Text-Conditional Image Generation with CLIP Latents"}, {"paperId": "3d3c5fcbc40aadccceda58d3d9c5cd00588ea0b7", "title": "Denoising Diffusion Restoration Models"}, {"paperId": "1e91fa21b890a8f5d615578f4ddf46c3cb394691", "title": "RePaint: Inpainting using Denoising Diffusion Probabilistic Models"}, {"paperId": "7002ae048e4b8c9133a55428441e8066070995cb", "title": "GLIDE: Towards Photorealistic Image Generation and Editing with Text-Guided Diffusion Models"}, {"paperId": "9eeb5f7c36654dff1dc93adb7150e7bab52cd3e2", "title": "Deblurring via Stochastic Refinement"}, {"paperId": "658a017302d29e4acf4ca789cb5d9f27983717ff", "title": "Masked-attention Mask Transformer for Universal Image Segmentation"}, {"paperId": "64ea8f180d0682e6c18d1eb688afdb2027c02794", "title": "Diffusion Models Beat GANs on Image Synthesis"}, {"paperId": "38b0567e83386ddc294d6c81b541deacbd8e3c2a", "title": "CLIPScore: A Reference-free Evaluation Metric for Image Captioning"}, {"paperId": "6f870f7f02a8c59c3e23f407f3ef00dd1dcf8fc4", "title": "Learning Transferable Visual Models From Natural Language Supervision"}, {"paperId": "5c126ae3421f05768d8edd97ecd44b1364e2c99a", "title": "Denoising Diffusion Probabilistic Models"}, {"paperId": "965359b3008ab50dd04e171551220ec0e7f83aba", "title": "Generative Modeling by Estimating Gradients of the Data Distribution"}, {"paperId": "231af7dc01a166cac3b5b01ca05778238f796e41", "title": "GANs Trained by a Two Time-Scale Update Rule Converge to a Local Nash Equilibrium"}, {"paperId": "571b0750085ae3d939525e62af510ee2cee9d5ea", "title": "Improved Techniques for Training GANs"}, {"paperId": "2dcef55a07f8607a819c21fe84131ea269cc2e3c", "title": "Deep Unsupervised Learning using Nonequilibrium Thermodynamics"}, {"paperId": "71b7178df5d2b112d07e45038cb5637208659ff7", "title": "Microsoft COCO: Common Objects in Context"}, {"paperId": null, "title": "An open dataset of user preferences"}]}