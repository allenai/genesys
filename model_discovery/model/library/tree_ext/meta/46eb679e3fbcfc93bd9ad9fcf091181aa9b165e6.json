{"paperId": "46eb679e3fbcfc93bd9ad9fcf091181aa9b165e6", "title": "Adaptation Approaches for Nearest Neighbor Language Models", "abstract": "Semi-parametric Nearest Neighbor Language Models ($k$NN-LMs) have produced impressive gains over purely parametric LMs, by leveraging large-scale neighborhood retrieval over external memory datastores. However, there has been little investigation into adapting such models for new domains. This work attempts to fill that gap and suggests the following approaches for adapting $k$NN-LMs -- 1) adapting the underlying LM (using Adapters), 2) expanding neighborhood retrieval over an additional adaptation datastore, and 3) adapting the weights (scores) of retrieved neighbors using a learned Rescorer module. We study each adaptation strategy separately, as well as the combined performance improvement through ablation experiments and an extensive set of evaluations run over seven adaptation domains. Our combined adaptation approach consistently outperforms purely parametric adaptation and zero-shot ($k$NN-LM) baselines that construct datastores from the adaptation data. On average, we see perplexity improvements of 17.1% and 16% for these respective baselines, across domains.", "venue": "Annual Meeting of the Association for Computational Linguistics", "year": 2022, "citationCount": 6, "influentialCitationCount": 0, "openAccessPdf": {"url": "http://arxiv.org/pdf/2211.07828", "status": "GREEN"}, "tldr": {"model": "tldr@v2.0.0", "text": "The combined adaptation approach consistently outperforms purely parametric adaptation and zero-shot ($k$NN-LM) baselines that construct datastores from the adaptation data."}, "embedding": {"model": "specter_v2", "vector": [-0.21661441028118134, 0.3605494797229767, -0.6419241428375244, -0.33595266938209534, -0.3874342143535614, -0.03987058997154236, 0.762047529220581, -0.5245275497436523, -0.8255856037139893, -0.14796842634677887, 1.1494172811508179, 0.35946160554885864, 0.30530935525894165, 0.005913024302572012, -0.09864325821399689, 0.28347504138946533, -0.6538779139518738, 0.20509988069534302, 0.22309868037700653, -0.8934862613677979, -0.3564952611923218, -0.8281439542770386, -0.7855924963951111, 0.1560218632221222, 0.42727717757225037, 0.14873087406158447, 0.039164695888757706, 0.5821261405944824, -0.47208866477012634, -0.12726086378097534, 0.35191717743873596, -0.09154907613992691, 0.32782599329948425, -0.40766486525535583, 0.09661781787872314, -0.4873429536819458, 0.4384171664714813, -0.7089239954948425, -0.4445647895336151, 0.5609550476074219, -0.2329542487859726, 0.4041084051132202, 0.5180001854896545, -0.26237738132476807, -0.7630826830863953, 0.7012522220611572, 1.0129449367523193, 0.5937314033508301, -0.22401490807533264, -0.674461841583252, 0.7917676568031311, -1.302868127822876, 0.3499749004840851, 1.4440085887908936, 0.7526622414588928, 0.5196713805198669, -0.047132376581430435, -0.7359521389007568, 0.3883756995201111, 0.0796990841627121, -1.3974196910858154, -0.9256572723388672, -0.011020067147910595, 0.2963220477104187, 1.8053178787231445, -0.6009101867675781, -0.21046341955661774, 0.4084436893463135, 0.02735740691423416, 0.7623589634895325, -0.5306800603866577, -0.8412963151931763, -0.3229692280292511, 0.47298678755760193, -0.10689347982406616, 0.42845359444618225, -0.7039695978164673, 0.10938599705696106, -0.7509260773658752, -0.291329026222229, 0.37981730699539185, -0.2512589693069458, -0.06212625280022621, -0.44224193692207336, -0.18729187548160553, 0.8580268621444702, 0.4173075556755066, 0.7398454546928406, -0.04098306968808174, 0.45732399821281433, 0.28140372037887573, 0.39009425044059753, 0.27036404609680176, 0.46392878890037537, -0.2302880585193634, 0.4273920953273773, -0.734596848487854, 0.17965185642242432, 0.2018025517463684, 0.993588387966156, 0.06760770082473755, 0.09523767232894897, -0.7353100776672363, 0.8798598647117615, 1.4040275812149048, -0.12583641707897186, 0.961108386516571, -1.1173330545425415, -0.12568150460720062, -0.8648578524589539, 0.3162897527217865, -0.2515522241592407, -0.10479006171226501, -0.31262752413749695, -0.6320739984512329, -1.2586108446121216, -0.3633148670196533, 0.19114357233047485, -0.3819440007209778, 0.9942454695701599, -0.043881431221961975, 0.29505404829978943, 0.41202202439308167, 0.17099714279174805, 0.5779127478599548, 0.7556857466697693, 0.4383668601512909, -0.21974687278270721, 0.29581451416015625, -0.88962721824646, -0.7863176465034485, -0.6562883853912354, 1.4118847846984863, -0.24521216750144958, 0.5057318806648254, -0.5720346570014954, -1.0901621580123901, -0.8516460061073303, -1.0023107528686523, -0.10509791225194931, -0.6828222274780273, 0.30378174781799316, 0.6195167303085327, 0.12493285536766052, -1.3239654302597046, 0.9471761584281921, 0.03865422308444977, -0.6794995665550232, 0.11293614655733109, 0.3099655508995056, 0.06890523433685303, -0.468205988407135, -1.655587077140808, 0.3749465048313141, 0.30285224318504333, -0.7803881168365479, 0.22749510407447815, -0.4584674835205078, -1.0483511686325073, -0.35978981852531433, 0.31120848655700684, -0.4899761378765106, 1.2955795526504517, -0.39992764592170715, -1.6893181800842285, 0.20073656737804413, -0.39833447337150574, 0.06038390100002289, -0.09631182998418808, 0.09300577640533447, -1.2068822383880615, -0.7500007152557373, -0.19332700967788696, 0.7342808246612549, 0.3042789697647095, 0.12101662158966064, -0.07557938247919083, 0.11794091016054153, -0.3117094039916992, 0.6082466840744019, -1.1193660497665405, 0.7877440452575684, -0.6493852138519287, -0.25772014260292053, 0.28579503297805786, 0.5819770693778992, 0.03836445137858391, -0.08641541749238968, 0.13899444043636322, -1.0893878936767578, 1.0012561082839966, 0.16998611390590668, 1.1594207286834717, -1.063616156578064, -0.8615719676017761, -0.047702107578516006, -0.6743382215499878, 0.12975569069385529, -1.1595741510391235, 0.35010501742362976, 0.07460175454616547, 0.4048551023006439, 0.25167107582092285, -1.060792326927185, -0.23179645836353302, -0.3383875787258148, -0.43815508484840393, -0.6085519790649414, -0.35936304926872253, 1.1438791751861572, -0.8124275803565979, 0.27588707208633423, -0.4663146138191223, 0.620151162147522, -0.7389047741889954, 1.1128575801849365, -0.4555857479572296, 0.02113961987197399, 0.0905633345246315, -0.2573144733905792, -0.2753414213657379, 0.046451635658741, 0.2777523100376129, -0.14713779091835022, 0.10354095697402954, 0.5045009851455688, -0.37543725967407227, 1.6180678606033325, -0.5306074619293213, 0.10237308591604233, 0.06520450860261917, -0.1667346954345703, 0.16578012704849243, 0.4826340079307556, -0.46299296617507935, -0.5143758058547974, -0.06463851779699326, 0.8023217916488647, -0.7232844829559326, 0.5585321187973022, 0.9242838621139526, 1.0030741691589355, -0.3536795675754547, 0.2345757633447647, 0.5111759305000305, -0.27314385771751404, 0.4494588375091553, 0.053851544857025146, 0.848164439201355, 0.3787227272987366, 0.5643159747123718, 0.12653225660324097, 0.5438076853752136, -0.44208234548568726, -0.2179139405488968, 0.2917441129684448, 0.48378241062164307, 0.509453296661377, -0.3695547580718994, -0.651047945022583, -0.540798008441925, -0.44225525856018066, 0.5068663954734802, 1.6287949085235596, -0.2693012058734894, -0.218997985124588, -0.6861788630485535, -0.18511398136615753, -0.5036262273788452, 0.46898964047431946, -0.32113417983055115, -0.41209766268730164, -0.9198164939880371, -0.7793640494346619, 0.6465646624565125, 0.33913007378578186, 0.9842270612716675, -0.5580843091011047, 0.300066739320755, -0.08816585689783096, 0.28725582361221313, -0.5680128931999207, -1.0100317001342773, 0.01463351957499981, -0.8934518098831177, 0.48412108421325684, -0.19503486156463623, -0.35206711292266846, -0.24222254753112793, -0.4394938349723816, 0.9843845367431641, -0.4370332658290863, -0.005683819763362408, -0.025927001610398293, 0.40860405564308167, -0.5638085007667542, -1.0356169939041138, 0.4781908094882965, 0.7494695782661438, -0.5113880634307861, 0.676241397857666, 0.2968656122684479, -0.06728006154298782, 0.2633402645587921, -0.4567689299583435, -0.29220476746559143, 0.228270024061203, -0.1401340812444687, 1.051729679107666, -0.4696057438850403, 0.45865827798843384, -1.3010586500167847, 1.207139253616333, -0.05742565914988518, -0.357702374458313, 0.4531407356262207, -0.8864918351173401, -0.4080222249031067, 0.6431857347488403, -0.9733256101608276, -0.40000948309898376, -0.8940584063529968, 0.6894574165344238, -0.16381609439849854, -0.3216434717178345, 0.3258594274520874, 0.09605232626199722, 0.3410998582839966, 0.7298730611801147, 0.4140720069408417, 0.5629922747612, 0.0019190477905794978, 0.9606758952140808, -0.4602764844894409, 0.8639242649078369, 0.7257262468338013, 0.36615505814552307, -0.19446596503257751, -0.40573742985725403, -0.855131983757019, -0.0547630600631237, -0.45803603529930115, -0.6169021725654602, -0.021486500278115273, 0.027958480641245842, -0.758421778678894, 0.1987692415714264, -0.37297406792640686, -0.8745751976966858, -0.3827354609966278, -0.11856512725353241, -0.08982277661561966, -0.11165673285722733, -1.0936652421951294, -1.0113070011138916, -0.29868122935295105, -0.5282520055770874, -0.43545183539390564, -0.14534297585487366, 0.21574510633945465, -0.8452221751213074, -0.3875957429409027, 0.4790361523628235, -0.4726465344429016, 1.4888640642166138, -1.122431993484497, 0.8253916501998901, 0.08665933459997177, 0.09355234354734421, -0.4947957396507263, 0.4651840031147003, 0.6297469735145569, -0.15455986559391022, -0.17062558233737946, -0.5250189900398254, 0.2941710352897644, -0.32905253767967224, -0.28359898924827576, -0.11505645513534546, 0.2624698579311371, 0.421417772769928, -0.01620524190366268, -0.488947331905365, 0.5472124814987183, 1.2001404762268066, -0.5638738870620728, -0.13849860429763794, 0.3673296272754669, 0.7918713092803955, 0.462829053401947, -0.3935115933418274, 0.25728529691696167, 0.38618728518486023, 0.9784441590309143, -0.06555882841348648, 0.17002859711647034, -0.3797351121902466, -0.7016868591308594, 0.894141674041748, 1.6020276546478271, 0.35599830746650696, 0.010456565767526627, -0.6669560670852661, 0.39058753848075867, -1.1810070276260376, -0.4065099358558655, 0.9055169224739075, 1.1075458526611328, 0.379951149225235, -0.9994677901268005, -0.3093990981578827, -0.9005041122436523, 0.272029846906662, 0.17621922492980957, -0.7457603812217712, -0.7179880738258362, -0.13297870755195618, 0.19472500681877136, 0.05287012457847595, 0.5523549914360046, -0.4826046824455261, 0.9948331713676453, 14.367988586425781, 0.7834583520889282, 0.15280327200889587, 0.8901351094245911, 0.31581127643585205, -0.225792795419693, -0.2919173538684845, -0.29390811920166016, -1.0997726917266846, -0.458534836769104, 1.6733410358428955, 0.20258532464504242, 1.2030727863311768, 0.09150196611881256, 0.24523091316223145, 0.5059142708778381, -0.5378058552742004, 0.5045767426490784, 0.935467004776001, -1.3029156923294067, 0.6588705778121948, 0.2808581590652466, 0.6375381946563721, 0.7831482291221619, 0.9256072044372559, 1.1018550395965576, 0.19329555332660675, -0.5412623882293701, -0.057671740651130676, 0.5378393530845642, 0.8748311996459961, -0.1478670835494995, 0.48401182889938354, 0.26478588581085205, -0.6071681380271912, -0.41051214933395386, -0.8870683312416077, -0.9202896356582642, 0.4034706950187683, -0.35245752334594727, -0.43032729625701904, -0.9478591680526733, 0.10683764517307281, 0.46635550260543823, -0.04793490096926689, 0.24866431951522827, -0.11235573887825012, 0.263102650642395, -0.25199854373931885, -0.09044656157493591, 0.02873271144926548, 0.11297561973333359, 0.23975037038326263, -0.23294159770011902, 0.3655823767185211, 0.10157506912946701, -0.22617363929748535, 0.46418628096580505, -0.7438082695007324, 0.5842124819755554, -0.8675350546836853, 0.03970944881439209, 0.14525043964385986, 0.5602747201919556, 1.096313714981079, 0.10052445530891418, -0.668690025806427, 0.7786038517951965, 0.8160918354988098, 0.49520426988601685, 0.24031952023506165, -0.2794819474220276, 0.47947829961776733, 0.32845908403396606, -0.1559600830078125, 0.5121912360191345, 0.03593205288052559, -0.4394979774951935, -0.6647003889083862, -0.08816620707511902, 0.2267724722623825, -1.0426394939422607, -0.7296057939529419, 1.1194523572921753, -0.21687090396881104, -0.7674639225006104, -0.3521672785282135, -0.6530548334121704, -0.45790553092956543, 0.3651023209095001, -1.1877881288528442, -0.5455183386802673, 0.5596393942832947, -0.1535705327987671, -0.5468212366104126, -0.5310283303260803, 1.800315499305725, -0.16144363582134247, -0.13015379011631012, 0.38952040672302246, 0.9054747819900513, -0.16096876561641693, 0.5752395987510681, -0.4226473271846771, 0.40966084599494934, 0.06229346618056297, -0.009632525034248829, 0.3245079517364502, -0.2028205841779709, 0.1777348816394806, -0.5249396562576294, -0.46596986055374146, 0.9208887219429016, -0.9497929215431213, -0.4921736717224121, -0.48556700348854065, -1.1045440435409546, 0.15442679822444916, 0.7186267971992493, -0.2833763659000397, 0.776760458946228, 0.31054389476776123, -0.7502073645591736, -0.32015639543533325, -0.8989483714103699, 0.6072975993156433, 0.7026821970939636, -0.8372073173522949, -0.2269541323184967, 0.08216018974781036, 0.506942868232727, -0.6692556142807007, -0.6714361310005188, -0.04072979837656021, -0.07510664314031601, 0.13136397302150726, 0.9718748927116394, -0.23567506670951843, 0.1240861788392067, 0.668142557144165, -0.3437211811542511, -0.7540935277938843, -0.12987343966960907, -0.6126566529273987, -0.225677028298378, 0.23134960234165192, 0.9892579317092896, -0.28694555163383484, 0.28959208726882935, 1.1045212745666504, 0.34507104754447937, -0.26228785514831543, -0.7443966269493103, -0.4589099586009979, 0.43994924426078796, -0.49168187379837036, 0.5932202935218811, -0.03759155794978142, -0.019638974219560623, 0.37470924854278564, 0.651071310043335, 0.4966621994972229, -0.2707209885120392, -1.4498496055603027, 0.5873538851737976, -0.19772744178771973, -0.012434032745659351, -0.6389477849006653, -0.22137762606143951, -1.3757470846176147, 0.38276705145835876, -1.2872364521026611, -0.09405363351106644, -0.7772653698921204, -0.35553181171417236, 0.12897352874279022, -0.28185468912124634, -0.20834819972515106, 0.9781750440597534, 0.19221080839633942, -0.6661203503608704, -0.006544869393110275, -0.7395840287208557, 1.0473871231079102, 0.4266239404678345, -0.6755353212356567, -0.7131708860397339, -0.24405449628829956, 0.09543906897306442, 0.4805871546268463, 0.6965076327323914, -0.20009790360927582, -1.0696231126785278, -1.6460767984390259, 0.18484042584896088, -0.3884492814540863, -0.2848602533340454, -0.6207522749900818, 0.7308590412139893, 0.6454145908355713, 0.16147947311401367, 0.3518126904964447, 0.34876006841659546, -0.6312796473503113, -0.5234313011169434, -0.17002181708812714, -0.8362250924110413, 0.646962583065033, 0.09456551820039749, -0.29144078493118286, -0.3504728078842163, 0.7720655798912048, -0.2674503028392792, -1.0085029602050781, -0.9184055924415588, 0.3265356719493866, -0.7832977175712585, -0.13351774215698242, -0.4768078327178955, -0.2002892941236496, -0.8500815033912659, -0.9620709419250488, -0.041968196630477905, 0.3194054365158081, 0.17428432404994965, 1.2038384675979614, 0.40133237838745117, -1.5105562210083008, -0.1716143935918808, 0.5298680663108826, 0.3655681014060974, -0.3343716561794281, 0.5116660594940186, 0.40756121277809143, -0.08747722208499908, 0.4341644048690796, 0.5325396656990051, 0.42398640513420105, -0.8741266131401062, -0.1856994330883026, 0.8370298147201538, -0.11058014631271362, 0.040934182703495026, 0.9244730472564697, -0.5132644772529602, -1.633896827697754, 0.17091591656208038, -1.084576964378357, -0.7171393632888794, -0.5615899562835693, 0.9048187136650085, 0.08378230780363083, -0.04282788932323456, -0.6398293375968933, -0.09848909825086594, 0.2680360972881317, -0.15951764583587646, -0.814812183380127, 0.47803109884262085, -0.4981241524219513, -0.5772473216056824, 0.7403659820556641, 0.9926838874816895, -0.8487876057624817, -0.4371469020843506, -0.9259806871414185, -0.3221149742603302, 0.20913486182689667, 0.3884066641330719, -0.4355130195617676, 0.11667142808437347, 0.27449315786361694, 1.0287652015686035, -0.4536738693714142, 0.2545492649078369, 0.09522164613008499, 0.2997860014438629, 0.9422122240066528, -0.025610119104385376, -1.0946705341339111, -0.5389207005500793, 1.5640747547149658, 1.3171063661575317, -1.1231125593185425, 0.1927727609872818, 0.13362905383110046, -0.4472588002681732, 0.8206958770751953, 0.454119473695755, 0.4221929907798767, 1.2726774215698242, -0.6295139193534851, 0.8768747448921204, 0.46574482321739197, -1.070774793624878, 0.3019716143608093, 0.8644402623176575, 1.12416410446167, 0.9955998659133911, 0.5162299871444702, -0.1696128100156784, 0.579949140548706, -0.08392065018415451, 0.09031613171100616, 0.5414520502090454, 0.01950533501803875, -0.19607092440128326, -0.46765992045402527, 0.17940229177474976, 0.8175157904624939, -0.11600294709205627, -0.6895951628684998, 0.04584497958421707, 0.6601676940917969, 0.31709370017051697, 0.6234886050224304, 0.9839913249015808, -0.13040199875831604, 0.6660975217819214, 0.47963640093803406, 0.10712822526693344, -0.822175145149231, -0.03534197434782982, -0.21861016750335693, -0.47936350107192993, -0.4124052822589874, -0.04959281533956528, -0.6260122656822205, -0.4086213707923889, -0.03480164334177971, 0.4575938582420349, -0.0635199248790741, 0.3801167607307434, 0.869981050491333, 0.9240901470184326, -0.3303339183330536, -0.4792132079601288, -0.2915128171443939, -0.6174817681312561, -1.1946420669555664, -0.12129540741443634, -0.4812386929988861, -0.6863843202590942, 0.28081363439559937, -0.010482504032552242, -0.744986355304718]}, "authors": [{"authorId": "3203533", "name": "Rishabh Bhardwaj"}, {"authorId": "1402376936", "name": "George Polovets"}, {"authorId": "1796272030", "name": "Monica Sunkara"}], "references": [{"paperId": "c406074e331fa11604059bdeb36433dc9d1e20de", "title": "Re2G: Retrieve, Rerank, Generate"}, {"paperId": "9fe222cb8464e8157b3654ab96ef719331dd2357", "title": "Meta-Learning the Difference: Preparing Large Language Models for Efficient Adaptation"}, {"paperId": "7cdaa08890895e1ad92afb5fad429690ad7b1dac", "title": "Few-Shot Parameter-Efficient Fine-Tuning is Better and Cheaper than In-Context Learning"}, {"paperId": "002c256d30d6be4b23d365a8de8ae0e67e4c9641", "title": "Improving language models by retrieving from trillions of tokens"}, {"paperId": "0c47eb31b2dd76d8dc986173a1d3f00da1c9c74d", "title": "Efficient Nearest Neighbor Language Models"}, {"paperId": "ecf5618b513aa5c4d5bf62ca251923a188251117", "title": "XL-Sum: Large-Scale Multilingual Abstractive Summarization for 44 Languages"}, {"paperId": "339b2b711fb5b228d097b03ebc3e62a521779235", "title": "BitFit: Simple Parameter-efficient Fine-tuning for Transformer-based Masked Language-models"}, {"paperId": "a8ca46b171467ceb2d7652fbfb67fe701ad86092", "title": "LoRA: Low-Rank Adaptation of Large Language Models"}, {"paperId": "a4ffce66918cfb33150a60bf8e26419199e63b01", "title": "BookSum: A Collection of Datasets for Long-form Narrative Summarization"}, {"paperId": "9dc624d7258d1a56117ca720aea953ce46b66b21", "title": "Efficient Attentions for Long Document Summarization"}, {"paperId": "46c585ee9abf76779ea4b863d2da4358efd0d1d3", "title": "Adaptive Semiparametric Language Models"}, {"paperId": "20d51f8e449b59c7e140f7a7eec9ab4d4d6f80ea", "title": "Nearest Neighbor Machine Translation"}, {"paperId": "063f8b1ecf2394ca776ac61869734de9c1953808", "title": "AdapterHub: A Framework for Adapting Transformers"}, {"paperId": "f9700e31a1d0ae34d4571ab056dfb268c1543349", "title": "SAMSum Corpus: A Human-annotated Dialogue Dataset for Abstractive Summarization"}, {"paperId": "7be8c119dbe065c52125ee7716601751f3116844", "title": "Generalization through Memorization: Nearest Neighbor Language Models"}, {"paperId": "c95383f251a62c63217586059c67f63507c3e839", "title": "HuggingFace's Transformers: State-of-the-art Natural Language Processing"}, {"paperId": "29ddc1f43f28af7c846515e32cc167bc66886d0c", "title": "Parameter-Efficient Transfer Learning for NLP"}, {"paperId": "85e07116316e686bf787114ba10ca60f4ea7c5b2", "title": "Passage Re-ranking with BERT"}, {"paperId": "305b2cf37e5dece81e95c92883d5a6e28ac93b22", "title": "Don\u2019t Give Me the Details, Just the Summary! Topic-Aware Convolutional Neural Networks for Extreme Summarization"}, {"paperId": "b227f3e4c0dc96e5ac5426b85485a70f2175a205", "title": "Representation Learning with Contrastive Predictive Coding"}, {"paperId": "853d4d94651c6d9f8ed4d114e1eb21f15f786daa", "title": "A Discourse-Aware Attention Model for Abstractive Summarization of Long Documents"}, {"paperId": "932a5de79d8a8ebb75ea0c43493450fd9922e738", "title": "Crowdsourcing Multiple Choice Science Questions"}, {"paperId": "2cbb8de53759e75411bc528518947a3094fbce3a", "title": "Billion-Scale Similarity Search with GPUs"}, {"paperId": "6c2b28f9354f667cd5bd07afc0471d8334430da7", "title": "A Neural Probabilistic Language Model"}, {"paperId": "9405cc0d6169988371b2755e573cc28650d14dfe", "title": "Language Models are Unsupervised Multitask Learners"}, {"paperId": "cd18800a0fe0b668a1cc19f2ec95b5003d0a5035", "title": "Improving Language Understanding by Generative Pre-Training"}, {"paperId": "9819b600a828a57e1cde047bbe710d3446b30da5", "title": "Recurrent neural network based language model"}, {"paperId": null, "title": "Faisal Mahbub Chowdhury, Ankita Rajaram Naik, Pengshan Cai, and A. Gliozzo. 2022. Re2g: Retrieve, rerank, generate. ArXiv"}]}