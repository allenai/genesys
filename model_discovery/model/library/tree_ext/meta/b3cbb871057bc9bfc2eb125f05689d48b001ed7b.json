{"paperId": "b3cbb871057bc9bfc2eb125f05689d48b001ed7b", "title": "Personalized Flight Itinerary Ranking at Fliggy", "abstract": "Flight itinerary ranking is critical for Online Travel Agencies (OTAs) since more and more customers book flights online. Currently, most OTAs still adopt rule-based strategies. However, rule-based methods are not able to model context-aware information and user preferences. To this end, a novel Personalized Flight itinerary Ranking Network (PFRN) is proposed in this paper. In PFRN, a Listwise Feature Encoding (LFE) structure is proposed to capture global context-aware information and mutual influences among inputs. Besides, we utilize behaviors of both individual user and group users sharing the same intention to express user preferences. Then a User Attention Mechanism is proposed to rank flight itineraries based on the user preferences effectively and efficiently. Offline experiments on real-world datasets from Amadeus and Fliggy show the superior performance of the proposed PFRN. Moreover, PFRN has been successfully deployed on online system for searching itineraries at Fliggy and achieved significant improvements.", "venue": "International Conference on Information and Knowledge Management", "year": 2020, "citationCount": 15, "influentialCitationCount": 3, "openAccessPdf": null, "tldr": {"model": "tldr@v2.0.0", "text": "A novel Personalized Flight itinerary Ranking Network (PFRN) is proposed with a Listwise Feature Encoding (LFE) structure to capture global context-aware information and mutual influences among inputs and a User Attention Mechanism is proposed to rank flight itineraries based on the user preferences effectively and efficiently."}, "embedding": {"model": "specter_v2", "vector": [-0.35929903388023376, -0.3071635067462921, -0.9984962344169617, -0.6065369248390198, -0.1731185019016266, -0.41657689213752747, 0.24176925420761108, -0.029994027689099312, -0.3639107644557953, -0.14080429077148438, 0.40592819452285767, 0.11714203655719757, -0.9304026961326599, -0.3866657018661499, -0.13497434556484222, 0.25034868717193604, -1.421522617340088, 0.5771026015281677, -0.18594469130039215, -0.9551926255226135, 0.014116594567894936, -0.4595615267753601, -1.5157891511917114, 0.34004178643226624, 0.7163596749305725, 1.0859183073043823, -0.27786028385162354, 0.7945042252540588, -0.45029783248901367, 0.22316274046897888, 0.6837698221206665, -0.2559020221233368, 0.711436927318573, 0.47441110014915466, -0.41595327854156494, -0.33134374022483826, 0.22902856767177582, -0.5844475030899048, -0.4174039363861084, 0.232110857963562, -0.7545811533927917, 1.1879031658172607, 0.6350593566894531, -0.7175138592720032, 0.02321133390069008, 0.19081087410449982, 1.2636562585830688, 0.45282265543937683, 0.08079495280981064, -1.2540485858917236, 1.748059630393982, -0.963851809501648, -0.12834249436855316, 0.9158764481544495, 0.13568124175071716, -0.2780030071735382, 0.08222875744104385, -0.40947791934013367, 0.8483636975288391, -0.1399877369403839, -0.5067888498306274, 0.1786544919013977, 0.05699923262000084, -0.29526031017303467, 0.8388530015945435, 0.33179086446762085, -0.005226615816354752, 0.02911873161792755, -0.18782514333724976, 1.5684062242507935, -0.06938646733760834, -0.7888184189796448, 0.25998347997665405, 0.04081998020410538, 0.4850228428840637, 0.7733664512634277, -0.2855656147003174, 0.2928790748119354, -1.1563286781311035, -0.17446213960647583, 0.4783622920513153, 0.6183255910873413, 0.45456400513648987, -0.09982898831367493, 0.3107154071331024, 0.9925010204315186, 0.8096474409103394, 0.3050363063812256, -0.9956775307655334, 0.12601441144943237, 0.06240348890423775, 0.3904576897621155, -0.4947771728038788, 0.3134707510471344, 0.27409878373146057, 0.43349385261535645, -0.4287218749523163, 0.2579013705253601, 0.008397890254855156, 0.31190064549446106, -0.09714283049106598, -0.2889670729637146, -0.5777693390846252, 0.478135347366333, 1.0258222818374634, -0.6433246731758118, 0.28670454025268555, -0.7335289120674133, 0.19296711683273315, 0.016665708273649216, 0.5947954058647156, -0.9976734519004822, 0.17203031480312347, 0.16746395826339722, -0.2530129551887512, -0.920864999294281, -0.5193466544151306, 0.2674907147884369, -0.5847247838973999, -0.2913549840450287, -0.27010369300842285, -0.12763050198554993, -0.1579141765832901, 0.7556208968162537, 0.003555613337084651, 0.613893449306488, -0.28805869817733765, -0.2374230921268463, 0.15299105644226074, -1.3212095499038696, -0.842162013053894, -0.8672236204147339, 0.40357527136802673, -0.051236592233181, -0.19558875262737274, -0.04444447532296181, -0.8355611562728882, -0.6857459545135498, -0.6467137336730957, 0.7796758413314819, -1.0930421352386475, 0.05409299209713936, 1.7426037788391113, 0.02855064906179905, -0.7558608651161194, 0.6570354700088501, 0.05154590308666229, -0.1681211143732071, -0.15601198375225067, 0.45186659693717957, 0.4968649744987488, -0.43637019395828247, -1.5771892070770264, -0.33398669958114624, 0.10125552862882614, -0.18714530766010284, 0.1333390325307846, 0.3897572159767151, -0.7479462623596191, -0.5464929342269897, 0.6298027634620667, -0.6293596029281616, 1.0344185829162598, -0.2207583338022232, -1.0477960109710693, -0.06692902743816376, 0.12704387307167053, 0.11425510048866272, 0.469180703163147, -0.43117600679397583, -1.1400686502456665, -0.435165137052536, 0.28175199031829834, -0.10431461781263351, 0.10756786912679672, -0.11643046140670776, -0.6033656001091003, 0.22868266701698303, 0.15992040932178497, 0.3788840174674988, -0.3057427704334259, 0.7780781388282776, -0.6096011996269226, 0.11600659787654877, 0.13923116028308868, 0.8259299397468567, -0.5038803815841675, 0.09607797116041183, 0.17444513738155365, -0.5659594535827637, 0.5775562524795532, 0.30377018451690674, 1.9993654489517212, -0.38610151410102844, -1.09271240234375, 0.702530026435852, -0.47067415714263916, 0.1296423375606537, -0.424307644367218, 1.044273853302002, -0.022803397849202156, 0.15410378575325012, 0.26633697748184204, -0.041261132806539536, -0.37027743458747864, 0.408541202545166, -0.6144319772720337, -0.8416510224342346, -0.41184893250465393, 0.6580021977424622, -0.973192572593689, 0.13402310013771057, 0.7301203608512878, -0.05453808978199959, -0.8188374042510986, 1.2877695560455322, -0.22575220465660095, -0.3026551604270935, -1.1102560758590698, 0.45522961020469666, -0.054398369044065475, -0.1397559493780136, 0.33713799715042114, -0.0049895416013896465, -0.6174091100692749, 0.5172094106674194, -0.8443797826766968, 0.9502230286598206, -0.21572501957416534, 0.17300884425640106, 0.091397225856781, -0.23979397118091583, 0.267810195684433, -0.14164182543754578, 0.4751422703266144, -0.5418272614479065, 0.31471866369247437, 0.7145633101463318, -0.9907693862915039, 0.05411579832434654, 0.7805474996566772, 1.2350308895111084, -0.8146265149116516, 0.173413947224617, -0.02148282341659069, 0.5578994750976562, 0.6397532820701599, 0.21408513188362122, 0.24014601111412048, 0.11577919870615005, 0.37327274680137634, 0.019141383469104767, 0.2864669859409332, -0.41843900084495544, -0.20026440918445587, 0.5891491174697876, 0.2653009593486786, -0.015329594723880291, -0.23490890860557556, -1.3730581998825073, 0.6249020099639893, -0.11963918805122375, 0.6167198419570923, 1.7507705688476562, 0.32873401045799255, -0.6156181693077087, -0.36390000581741333, -0.7256690263748169, 0.29928305745124817, 0.12427457422018051, -0.6546144485473633, 0.2538597881793976, -0.3250274658203125, -0.7248311042785645, 0.5493430495262146, 0.10334843397140503, 0.9983720183372498, -0.3459177315235138, -0.27339082956314087, -0.1944740265607834, -0.5075693130493164, -0.12089699506759644, -0.7739043831825256, 0.5793983340263367, -0.16260629892349243, -0.29439619183540344, 0.45517697930336, -0.024555228650569916, 0.092987559735775, -0.24973627924919128, 0.49682334065437317, -0.14003220200538635, -0.18757537007331848, -0.005680168978869915, 0.4066328704357147, -0.3608047068119049, 0.38242486119270325, -0.47234585881233215, 0.5579102635383606, 0.28771984577178955, 0.5834853053092957, 0.8377789855003357, -0.15225401520729065, 0.86168372631073, -0.5976909399032593, -0.1958036869764328, 0.04599391669034958, 0.2250274419784546, 0.7292312383651733, 0.3238605558872223, -0.04565824568271637, -0.6290874481201172, 0.9745481610298157, 0.2109808325767517, -0.6540594696998596, 0.252540647983551, -0.7711789608001709, -0.45938074588775635, 0.5545462369918823, -0.11764398217201233, 0.21159791946411133, -1.2541580200195312, 0.7130840420722961, -0.20809118449687958, -0.38594356179237366, 0.9528408646583557, 0.512427568435669, -0.24442073702812195, 0.30981919169425964, 0.032282840460538864, 0.4716185927391052, 0.02898162044584751, 0.17586711049079895, -0.012174403294920921, 0.35029107332229614, 0.24051079154014587, -0.25836607813835144, -0.13360220193862915, -0.204701766371727, -0.3327741026878357, -0.8114207983016968, -0.7769497632980347, 0.026627663522958755, -0.7858666777610779, -0.42779433727264404, -0.2636047601699829, -1.0544172525405884, -0.8126392364501953, -0.32408908009529114, -0.03803625702857971, 0.3881443738937378, 0.20223230123519897, -0.23626112937927246, -1.5183982849121094, -0.813186526298523, -0.9854445457458496, -0.0361417755484581, -0.6032915711402893, -0.12411382049322128, 0.12100689113140106, 0.011697012931108475, -0.4555986523628235, 0.018031679093837738, 0.20720884203910828, 0.899163544178009, -0.036629583686590195, 0.1958826184272766, -0.052406247705221176, -0.3911077082157135, -0.8039863705635071, 0.43957433104515076, 0.0012361083645373583, 0.43325430154800415, 0.5017853379249573, 0.23861980438232422, 0.47997286915779114, -0.44917577505111694, 0.1692502647638321, -0.05487668141722679, 0.39372578263282776, 0.8557323813438416, -0.4736626446247101, -0.6862356662750244, 0.2569364309310913, 1.336039423942566, -0.2645411789417267, -0.198266863822937, 0.6453007459640503, 0.3835941553115845, 0.9949405789375305, 1.0765067338943481, 0.8273732662200928, 0.12280495464801788, 1.0432132482528687, 0.6439555287361145, -0.33354952931404114, 0.3734281063079834, -0.7290090322494507, 0.2944609224796295, 1.4904470443725586, 0.09124552458524704, -0.20227503776550293, -0.946275532245636, 0.6226183176040649, -1.8327759504318237, -0.868142306804657, 0.6501162648200989, 1.5829412937164307, -0.6567662358283997, -0.4040629267692566, 0.4790884256362915, -0.3125951290130615, 0.7701413631439209, 0.1957128345966339, 0.12297414988279343, -0.7074331045150757, 0.44869372248649597, -0.39085376262664795, 0.39831334352493286, 0.883658766746521, -0.7301591634750366, 0.5277879238128662, 14.656330108642578, 0.7398613095283508, 0.18530933558940887, -0.1658092737197876, 0.6050748825073242, 0.04422396048903465, -0.16181108355522156, -0.3388734757900238, -1.0258550643920898, 0.28283920884132385, 1.520344853401184, 0.023772772401571274, 0.8869680762290955, 0.2529964745044708, 0.1349567323923111, 0.10244851559400558, -0.08689836412668228, 0.7304185628890991, 0.5953478217124939, -1.2671350240707397, 0.7921174764633179, 0.6317463517189026, 0.10240905731916428, 0.5459131598472595, 0.7637497782707214, 0.7403198480606079, 0.7312910556793213, -0.6530938148498535, 0.2168237715959549, 0.2030036300420761, 0.46966737508773804, -1.2780228853225708, 0.6817111372947693, 0.6809146404266357, -1.1227420568466187, -0.6635951995849609, -0.527665376663208, -1.3316960334777832, 0.4802311062812805, -0.08754172921180725, -0.4285953938961029, 0.4509190618991852, -0.005604126490652561, 0.6394696235656738, 0.5339977145195007, 0.41445520520210266, -0.0740131139755249, -0.06308795511722565, -0.23111921548843384, -0.3132472038269043, 0.7884730696678162, -0.27687421441078186, 0.14859533309936523, -0.5122043490409851, 0.166025310754776, 0.325817734003067, 0.4727345108985901, -0.3793621361255646, -0.10100061446428299, 0.029523301869630814, -1.130805492401123, -0.4393013119697571, 0.04060762748122215, 0.9252864122390747, 0.8776671886444092, 0.40757137537002563, 0.20289349555969238, 0.16395552456378937, 0.2568323612213135, 0.23842105269432068, -0.6408896446228027, -0.4005325436592102, 0.9362784624099731, 0.287269651889801, -0.6452382206916809, 0.609503448009491, -0.0529509112238884, -0.2697571814060211, -0.9114893078804016, 0.09156935662031174, 0.8846209049224854, -0.5573103427886963, -0.7709890604019165, 1.455818772315979, -0.32199758291244507, -1.079605221748352, -0.3732186257839203, -0.8697976469993591, -0.3814355731010437, 0.03996642678976059, -1.2845412492752075, -0.5747729539871216, 0.11103943735361099, -0.059835709631443024, -0.30928412079811096, 0.22487185895442963, 1.0860786437988281, 0.5246586799621582, -0.5018989443778992, -0.13787564635276794, 0.23619577288627625, -0.30545738339424133, 0.08269534260034561, -0.7334579825401306, -0.0011100925039499998, 0.39854738116264343, -0.05774439871311188, 0.9128382205963135, -0.23926858603954315, -0.040525227785110474, -0.5485776662826538, -0.45504340529441833, 0.5308383107185364, -0.9980672001838684, -0.2943126857280731, -0.8009678721427917, -0.5487217307090759, 0.11955670267343521, 0.37975168228149414, -0.24372339248657227, 0.6669123768806458, 0.507563591003418, -0.10443099588155746, -0.4089697003364563, -1.0024161338806152, 0.3289230167865753, 0.3079633414745331, -0.22995741665363312, -0.13308362662792206, 0.1349652260541916, 0.11001675575971603, -0.5059622526168823, -0.2710757851600647, 0.03639023005962372, 0.3968726396560669, -0.38473039865493774, 1.2561651468276978, -0.6021442413330078, 0.5263246297836304, 0.4860367178916931, -0.543673038482666, -0.4245690703392029, -0.4474073350429535, -0.913804829120636, 0.12299292534589767, -0.2392210215330124, 0.6098197102546692, -0.74418044090271, 0.3657941520214081, 1.454389214515686, 0.23337769508361816, -0.7799946069717407, -0.04904206097126007, -0.23782610893249512, -0.5715053081512451, -0.36898282170295715, 0.6687583327293396, 0.15206004679203033, -0.007659772876650095, -0.19947415590286255, 0.1885763704776764, 0.6613102555274963, -0.12143037468194962, -0.3476463556289673, 0.36763814091682434, -0.5866305232048035, 0.13393859565258026, -0.6993772387504578, -0.08594351261854172, -1.377424716949463, -0.7901978492736816, -0.771792471408844, 0.11459994316101074, -1.430978775024414, -1.0645846128463745, 0.10722027719020844, -1.029960036277771, 0.10252993553876877, 0.8564228415489197, -0.9007196426391602, -0.8827985525131226, -0.4149947464466095, -1.223601222038269, 0.5275901556015015, 0.5342258810997009, -0.03340618684887886, -0.1810053139925003, 0.3234545886516571, 0.03937618434429169, 0.44336414337158203, 0.2966953217983246, -0.034618064761161804, -0.37685877084732056, -0.69540935754776, 0.20573988556861877, -0.011698232032358646, -0.30748307704925537, -0.3453516364097595, 1.2555110454559326, -0.5644711852073669, -0.26023581624031067, -0.8280512094497681, 0.44849690794944763, -1.3346601724624634, -0.17533735930919647, -0.1709286868572235, -0.49659645557403564, 0.3272330164909363, -0.3118820786476135, -0.29298079013824463, -0.8339865207672119, 1.1605437994003296, -0.3279781937599182, -0.3775867819786072, -0.8249825239181519, 0.7201105952262878, -0.8829401731491089, -0.3564773201942444, 0.11635859310626984, -0.4642682671546936, -0.7575598359107971, -0.5820451974868774, 0.2357925921678543, 1.0348377227783203, -0.29988518357276917, 1.0150548219680786, 0.5923961997032166, -1.5651183128356934, 0.4929291903972626, 0.75972980260849, 0.14312627911567688, -0.5855287313461304, 0.3821282386779785, 0.6198651194572449, -0.5679605603218079, 0.7776908278465271, -0.13353081047534943, 0.6422747373580933, -0.633033037185669, -0.05317755416035652, 0.33194997906684875, -0.4941306412220001, 0.6319420337677002, 0.9326294660568237, -0.2696942985057831, -1.1205788850784302, 0.1869768649339676, -0.34155982732772827, -0.9078056216239929, -0.21906116604804993, 0.8027756214141846, 0.6083239912986755, -0.09654033184051514, -0.40782225131988525, -0.8658277988433838, 0.17897798120975494, -0.5396243333816528, -0.32940372824668884, 0.4629873037338257, -0.29785171151161194, -0.2521110475063324, 0.7242012023925781, 0.3079868257045746, -0.42468830943107605, -0.5513620972633362, -0.06243354082107544, -0.3926062285900116, -0.9835435748100281, 0.33338794112205505, -0.8018748164176941, -0.2227901816368103, 0.018804430961608887, 0.4041435718536377, 0.7617887854576111, 0.4865955114364624, -0.4957229793071747, 0.1756962686777115, 0.6555185914039612, 0.6748206615447998, -1.0410343408584595, -0.31497180461883545, 0.8816497325897217, 1.2317699193954468, -0.9627918004989624, 0.08233979344367981, -0.2581579387187958, -0.9528777599334717, 0.7459987998008728, 0.2813224494457245, -0.46410632133483887, 0.7366682887077332, -0.729108452796936, 0.4780580997467041, -0.02764100953936577, -1.1507269144058228, -0.46982213854789734, 0.9598546028137207, 0.8380537629127502, 0.36871835589408875, 0.7821574807167053, -0.23479533195495605, 0.8241870999336243, 0.45037832856178284, 0.1391647905111313, 0.3710305988788605, 0.5763903260231018, -0.39290115237236023, -0.3392742872238159, 0.07265050709247589, 1.0422260761260986, -0.40854740142822266, -0.05403926968574524, -0.5442164540290833, 0.8357225060462952, -0.12205147743225098, 0.9334753751754761, 0.40000617504119873, -0.7281807661056519, 0.7604970932006836, -0.26970866322517395, -0.5511890649795532, -0.3471027910709381, -0.540992021560669, 0.11466021090745926, -0.3112718164920807, -0.4765111207962036, 0.10292240977287292, -0.39222314953804016, -0.4739823043346405, -0.16942504048347473, 0.198811337351799, 0.96420818567276, 0.15679007768630981, 0.31546860933303833, 0.6508272886276245, 0.33671078085899353, 0.18379710614681244, -0.38863494992256165, -0.2194276750087738, -0.008441273123025894, -0.22436897456645966, -0.7324168682098389, -0.2934414744377136, -0.6757301092147827, -0.4704233705997467, -1.3600925207138062]}, "authors": [{"authorId": "2143650140", "name": "Jin Huang"}, {"authorId": "2154901504", "name": "Yang Li"}, {"authorId": "1736797181", "name": "Shanzun Sun"}, {"authorId": "2538116", "name": "Bufeng Zhang"}, {"authorId": "2143650140", "name": "Jin Huang"}], "references": [{"paperId": "3c04fc87fbbd128a8b13089ac50c4a840e1b8478", "title": "SDM: Sequential Deep Matching Model for Online Large-scale Recommender System"}, {"paperId": "98f65707cdadaaa2d2dc127d6b3fc6d3b68bf03b", "title": "Exact-K Recommendation via Maximal Clique Optimization"}, {"paperId": "3fe54159c587bbd1dedc1a3b4e21962f8693fd57", "title": "Personalized re-ranking for recommendation"}, {"paperId": "690edf44e8739fd80bdfb76f40c9a4a222f3bba8", "title": "BERT4Rec: Sequential Recommendation with Bidirectional Encoder Representations from Transformer"}, {"paperId": "c4744a7c2bb298e4a52289a1e085c71cc3d37bc6", "title": "Transformer-XL: Attentive Language Models beyond a Fixed-Length Context"}, {"paperId": "e763c7c0d718e5796cd9142843fb81389a2b6268", "title": "CSAN: Contextual Self-Attention Network for User Sequential Recommendation"}, {"paperId": "97faeefa771e8cc8e55159e2bd03e6f5eef249a8", "title": "Self-Attentive Sequential Recommendation"}, {"paperId": "2553596e3b24444d309ae461da50370d58f1b807", "title": "Real-time Personalization using Embeddings for Search Ranking at Airbnb"}, {"paperId": "438a7b39c28422681608b1a87b004331787a0476", "title": "Predicting User Flight Preferences in an Airline E-Shop"}, {"paperId": "e01afd8b7c12894fbe0d48fd87045d9b2ad4c5e3", "title": "Learning a Deep Listwise Context Model for Ranking Refinement"}, {"paperId": "c8efcc854d97dfc2a42b83316a2109f9d166e43f", "title": "Self-Attention with Relative Position Representations"}, {"paperId": "d950ce80c91e3abe4d535ae6ddc2c10acdff42f3", "title": "Deep Choice Model Using Pointer Networks for Airline Itinerary Prediction"}, {"paperId": "b8c6ccd5c1eb4f9837fc4877d27e55b7349781be", "title": "Deep Interest Network for Click-Through Rate Prediction"}, {"paperId": "204e3073870fae3d05bcbc2f6a8e263d9b72e776", "title": "Attention is All you Need"}, {"paperId": "5694e46284460a648fe29117cbc55f6c9be3fa3c", "title": "Densely Connected Convolutional Networks"}, {"paperId": "657fbf29ea0b4904a3e98d1556f9acf38dddae5f", "title": "Wide & Deep Learning for Recommender Systems"}, {"paperId": "93499a7c7f699b6630a86fad964536f9423bb6d0", "title": "Effective Approaches to Attention-based Neural Machine Translation"}, {"paperId": "a6cb366736791bcccc5c8639de5a8f9636bf87e8", "title": "Adam: A Method for Stochastic Optimization"}, {"paperId": "fa72afa9b2cbc8f0d7b05d52548906610ffbb9c5", "title": "Neural Machine Translation by Jointly Learning to Align and Translate"}, {"paperId": "1679beddda3a183714d380e944fe6bf586c083cd", "title": "Greedy function approximation: A gradient boosting machine."}, {"paperId": "814aad45aa227433256c8d3bbf62b55521ee36a0", "title": "Next Item Recommendation with Self-Attentive Metric Learning"}, {"paperId": null, "title": "\u2022 Multi-layer perceptron (MLP) [4] is viewed as a baseline method of pointwise model"}, {"paperId": null, "title": "\u2022 DIN [21] 8 is an improved version of MLP with user shortterm history behaviors"}, {"paperId": null, "title": "Ranking the flight itineraries by price. \u2022 Shortest: Ranking the flight itineraries by duration. \u2022 Gradient boosting decision tree (GBDT) [6] is widely adopted in industrial applications"}, {"paperId": null, "title": "16] adopts the standard Transformer for listwise reranking at Taobao. Here we need to train an additional model to learn the interaction between users and items"}, {"paperId": null, "title": "15] 6 adopts the long short-term memory (LSTM) module to capture the global information from the listwise input for airline itinerary choice prediction"}]}